<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.247">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Grundlagen der Prognosemodellierung üîÆüß∞ - 7&nbsp; kNN</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./080-Resampling-Tuning.html" rel="next">
<link href="./060-tidymodels.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zus√§tzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zur√ºcksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./070-knn.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">kNN</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Grundlagen der Prognosemodellierung üîÆüß∞</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Zu diesem Buch</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010-Hinweise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Hinweise</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./030-Pruefung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Pr√ºfung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./040-Statistisches-Lernen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statistisches Lernen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./050-R-Vertiefung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">R, zweiter Blick</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./060-tidymodels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">tidymodels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./070-knn.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">kNN</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./080-Resampling-Tuning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Resampling und Tuning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./090-glm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./100-baeume.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Entscheidungsb√§ume</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./110-ensemble.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ensemble Lerner</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./120-regularisierte-modelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Regularisierte Modelle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./130-kaggle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Kaggle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./140-faden.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Der rote Faden</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./150-fallstudien.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fallstudien</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./160-e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Staunen mit e</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
<li>
<a href="#lernsteuerung" id="toc-lernsteuerung" class="nav-link active" data-scroll-target="#lernsteuerung"><span class="header-section-number">7.1</span> Lernsteuerung</a>
  <ul class="collapse">
<li><a href="#%C3%BCberblick" id="toc-√ºberblick" class="nav-link" data-scroll-target="#%C3%BCberblick"><span class="header-section-number">7.1.1</span> √úberblick</a></li>
  <li><a href="#lernziele" id="toc-lernziele" class="nav-link" data-scroll-target="#lernziele"><span class="header-section-number">7.1.2</span> Lernziele</a></li>
  <li><a href="#literatur" id="toc-literatur" class="nav-link" data-scroll-target="#literatur"><span class="header-section-number">7.1.3</span> Literatur</a></li>
  </ul>
</li>
  <li><a href="#ben%C3%B6tigte-r-pakete" id="toc-ben√∂tigte-r-pakete" class="nav-link" data-scroll-target="#ben%C3%B6tigte-r-pakete"><span class="header-section-number">7.2</span> Ben√∂tigte R-Pakete</a></li>
  <li><a href="#intuitive-erkl%C3%A4rung" id="toc-intuitive-erkl√§rung" class="nav-link" data-scroll-target="#intuitive-erkl%C3%A4rung"><span class="header-section-number">7.3</span> Intuitive Erkl√§rung</a></li>
  <li><a href="#krebsdiagnostik" id="toc-krebsdiagnostik" class="nav-link" data-scroll-target="#krebsdiagnostik"><span class="header-section-number">7.4</span> Krebsdiagnostik</a></li>
  <li><a href="#berechnung-der-n%C3%A4he" id="toc-berechnung-der-n√§he" class="nav-link" data-scroll-target="#berechnung-der-n%C3%A4he"><span class="header-section-number">7.5</span> Berechnung der N√§he</a></li>
  <li>
<a href="#knn-mit-tidymodels" id="toc-knn-mit-tidymodels" class="nav-link" data-scroll-target="#knn-mit-tidymodels"><span class="header-section-number">7.6</span> kNN mit Tidymodels</a>
  <ul class="collapse">
<li><a href="#analog-zu-timbers-et-al." id="toc-analog-zu-timbers-et-al." class="nav-link" data-scroll-target="#analog-zu-timbers-et-al."><span class="header-section-number">7.6.1</span> Analog zu Timbers et al.</a></li>
  <li><a href="#rezept-definieren" id="toc-rezept-definieren" class="nav-link" data-scroll-target="#rezept-definieren"><span class="header-section-number">7.6.2</span> Rezept definieren</a></li>
  <li><a href="#modell-definieren" id="toc-modell-definieren" class="nav-link" data-scroll-target="#modell-definieren"><span class="header-section-number">7.6.3</span> Modell definieren</a></li>
  <li><a href="#workflow-definieren" id="toc-workflow-definieren" class="nav-link" data-scroll-target="#workflow-definieren"><span class="header-section-number">7.6.4</span> Workflow definieren</a></li>
  <li><a href="#vorhersagen" id="toc-vorhersagen" class="nav-link" data-scroll-target="#vorhersagen"><span class="header-section-number">7.6.5</span> Vorhersagen</a></li>
  </ul>
</li>
  <li>
<a href="#mit-train-test-aufteilung" id="toc-mit-train-test-aufteilung" class="nav-link" data-scroll-target="#mit-train-test-aufteilung"><span class="header-section-number">7.7</span> Mit Train-Test-Aufteilung</a>
  <ul class="collapse">
<li><a href="#rezept-definieren-1" id="toc-rezept-definieren-1" class="nav-link" data-scroll-target="#rezept-definieren-1"><span class="header-section-number">7.7.1</span> Rezept definieren</a></li>
  <li><a href="#modell-definieren-1" id="toc-modell-definieren-1" class="nav-link" data-scroll-target="#modell-definieren-1"><span class="header-section-number">7.7.2</span> Modell definieren</a></li>
  <li><a href="#workflow-definieren-1" id="toc-workflow-definieren-1" class="nav-link" data-scroll-target="#workflow-definieren-1"><span class="header-section-number">7.7.3</span> Workflow definieren</a></li>
  <li><a href="#vorhersagen-1" id="toc-vorhersagen-1" class="nav-link" data-scroll-target="#vorhersagen-1"><span class="header-section-number">7.7.4</span> Vorhersagen</a></li>
  <li><a href="#modellg%C3%BCte" id="toc-modellg√ºte" class="nav-link" data-scroll-target="#modellg%C3%BCte"><span class="header-section-number">7.7.5</span> Modellg√ºte</a></li>
  <li><a href="#visualisierung" id="toc-visualisierung" class="nav-link" data-scroll-target="#visualisierung"><span class="header-section-number">7.7.6</span> Visualisierung</a></li>
  </ul>
</li>
  <li><a href="#kennzahlen-der-klassifikation" id="toc-kennzahlen-der-klassifikation" class="nav-link" data-scroll-target="#kennzahlen-der-klassifikation"><span class="header-section-number">7.8</span> Kennzahlen der Klassifikation</a></li>
  <li><a href="#krebstest-beispiel" id="toc-krebstest-beispiel" class="nav-link" data-scroll-target="#krebstest-beispiel"><span class="header-section-number">7.9</span> Krebstest-Beispiel</a></li>
  <li><a href="#aufgaben" id="toc-aufgaben" class="nav-link" data-scroll-target="#aufgaben"><span class="header-section-number">7.10</span> Aufgaben</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">7</span>&nbsp; <span class="chapter-title">kNN</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="lernsteuerung" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="lernsteuerung">
<span class="header-section-number">7.1</span> Lernsteuerung</h2>
<section id="√ºberblick" class="level3" data-number="7.1.1"><h3 data-number="7.1.1" class="anchored" data-anchor-id="√ºberblick">
<span class="header-section-number">7.1.1</span> √úberblick</h3>
<p>In diesem Kapitel geht es um das Verfahren <em>KNN</em>, <em>K-N√§chste-Nachbarn</em> (<span class="math inline">\(k\)</span> nearest neighbors).</p>
</section><section id="lernziele" class="level3" data-number="7.1.2"><h3 data-number="7.1.2" class="anchored" data-anchor-id="lernziele">
<span class="header-section-number">7.1.2</span> Lernziele</h3>
<ul>
<li>‚ÄúSie sind in der Lage, einfache Klassifikationsmodelle zu spezifizieren mit tidymodels‚Äù</li>
<li>‚ÄúSie k√∂nnen den knn-Algorithmus erl√§utern‚Äù</li>
<li>‚ÄúSie k√∂nnen den knn-Algorithmus in tidymodels anwenden‚Äù</li>
<li>‚ÄúSie k√∂nnen die G√ºtemetriken von Klassifikationsmodellen einsch√§tzen‚Äù</li>
</ul></section><section id="literatur" class="level3" data-number="7.1.3"><h3 data-number="7.1.3" class="anchored" data-anchor-id="literatur">
<span class="header-section-number">7.1.3</span> Literatur</h3>
<ul>
<li>‚ÄúRhys, Kap. 3‚Äù</li>
<li>‚Äú<a href="https://datasciencebook.ca/classification.html#classification">Timbers et al., Kap. 5</a>‚Äù</li>
</ul></section></section><section id="ben√∂tigte-r-pakete" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="ben√∂tigte-r-pakete">
<span class="header-section-number">7.2</span> Ben√∂tigte R-Pakete</h2>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-1_d5b970c44efb1dc2f0aedd4c27f7abd6">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span></span>
<span><span class="co">#library(tidyverse)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="intuitive-erkl√§rung" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="intuitive-erkl√§rung">
<span class="header-section-number">7.3</span> Intuitive Erkl√§rung</h2>
<p><em>K-N√§chste-Nachbarn</em> (<span class="math inline">\(k\)</span> nearest neighbors, kNN) ist ein einfacher Algorithmus des maschinellen Lernens, der sowohl f√ºr Klassifikation als auch f√ºr numerische Vorhersage (Regression) genutzt werden kann. Wir werden kNN als Beispiel f√ºr eine Klassifikation betrachten.</p>
<p>Betrachen wir ein einf√ºhrendes Beispiel von <span class="citation" data-cites="rhys">Rhys (<a href="references.html#ref-rhys" role="doc-biblioref">2020</a>)</span>, f√ºr das es eine <a href="https://livebook.manning.com/book/machine-learning-for-mortals-mere-and-otherwise/chapter-3/22">Online-Quelle</a> gibt. Stellen Sie sich vor, wir laufen durch englische Landschaft, vielleicht die Grafschaft Kent, und sehen ein kleines Tier durch das Gras huschen. Eine Schlange?! In England gibt es (laut <span class="citation" data-cites="rhys">Rhys (<a href="references.html#ref-rhys" role="doc-biblioref">2020</a>)</span>) nur eine giftige Schlange, die Otter (Adder). Eine andere Schlange, die <em>Grass Snake</em> ist nicht giftig, und dann kommt noch der <em>Slow Worm</em> in Frage, der gar nicht zur Familie der Schlangen geh√∂rt. Prim√§r interessiert uns die Frage, haben wir jetzt eine Otter gesehen? Oder was f√ºr ein Tier war es?</p>
<p>Zum Gl√ºck wissen wir einiges √ºber Schlangen bzw. schlangen√§hnliche Tiere Englands. N√§mlich k√∂nnen wir die betreffenden Tierarten in Gr√∂√üe und Aggressivit√§t einsch√§tzen, das ist in Abbildung <a href="#fig-slang">Abbildung&nbsp;<span>7.1</span></a> dargestellt.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-slang_f50eb9f651424a6e91117818cf31678c">
<div class="cell-output-display">
<div id="fig-slang" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/rhys-fig3-2.jpeg" class="img-fluid figure-img" width="216"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.1: Haben wir gerade eine Otter gesehen?</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Der Algorithmus von kNN sieht einfach gesagt vor, dass wir schauen, welcher Tierarten Tiere mit √§hnlicher Aggressivit√§t und Gr√∂√üe angeh√∂ren. Die Tierart die bei diesen ‚ÄúNachbarn‚Äù hinsichtlich √Ñhnlichkeit relevanter Merkmale am h√§ufigsten vertreten ist, ordnen wir die bisher unklassifizierte Beobachtung zu.</p>
<p>Etwas zugespitzt:</p>
<blockquote class="blockquote">
<p>Wenn es quakt wie eine Ente ü¶Ü, l√§uft wie eine Ente ü¶Üund aussieht wie eine Ente ü¶Ü, dann ist es eine Ente ü¶Ü.</p>
</blockquote>
<p>Die Anzahl <span class="math inline">\(k\)</span> der n√§chsten Nachbarn k√∂nnen wir frei w√§hlen; der Wert wird <em>nicht</em> vom Algorithmuss bestimmt. Solche vom Nutzi zu bestimmenden Gr√∂√üen nennt man auch <em>Tuningparameter</em>.</p>
</section><section id="krebsdiagnostik" class="level2" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="krebsdiagnostik">
<span class="header-section-number">7.4</span> Krebsdiagnostik</h2>
<p>Betrachten wir ein Beispiel von <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span>, das <a href="https://datasciencebook.ca/classification.html#classification-with-k-nearest-neighbors">hier</a> frei eingesehen werden kann.</p>
<p>Die Daten sind so zu beziehen:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-3_76ee1fb8dc8a07ecbc31fe57ecc471ea">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/UBC-DSCI/introduction-to-datascience/master/data/wdbc.csv"</span></span>
<span><span class="va">cancer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="va">data_url</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In diesem Beispiel versuchen wir Tumore der Brust zu klassifizieren, ob sie einen schweren Verlauf (maligne, engl. malignant) oder einen weniger schweren Verlauf (benigne, engl. benign) erwarten lassen. Der Datensatz ist <a href="https://datasciencebook.ca/classification.html#describing-the-variables-in-the-cancer-data-set">hier</a> n√§her erl√§utert.</p>
<p>Wie in <a href="#fig-cancer1">Abbildung&nbsp;<span>7.2</span></a> ersichtlich, steht eine Tumordiagnose (malignant vs.&nbsp;benign) in Abh√§ngigkeit von Umfang (engl. perimeter) und <a href="https://de.wikipedia.org/wiki/Konvexe_und_konkave_Funktionen">Konkavit√§t</a>, die ‚ÄúGekr√ºmmtheit nach innen‚Äù.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-cancer1_dee115976d16a486ff13b53305f580f0">
<div class="cell-output-display">
<div id="fig-cancer1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="070-knn_files/figure-html/fig-cancer1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.2: Streudiagramm zur Einsch√§tzung von Tumordiagnosen</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>In diesem Code-Beispiel wird die seit R 4.1.0 verf√ºgbare R-native Pfeife verwendet. Wichtig ist vielleicht vor allem, dass diese Funktion nicht l√§uft auf R-Versionen vor 4.1.0. Einige Unterschiede zur seit l√§ngerem bekannten Magrittr-Pfeife sind <a href="https://stackoverflow.com/questions/67633022/what-are-the-differences-between-rs-new-native-pipe-and-the-magrittr-pipe">hier</a> erl√§utert.</p>
<p>Wichtig ist, dass die Merkmale standardisiert sind, also eine identische Skalierung aufweisen, da sonst das Merkmal mit kleinerer Skala weniger in die Berechnung der N√§he (bzw. Abstand) eingeht.</p>
<p>F√ºr einen neuen, bisher unklassifizierten Fall suchen nur nun nach einer Diagnose, also nach der am besten passenden Diagnose (maligne oder benigne), s. <a href="#fig-cancer2">Abbildung&nbsp;<span>7.3</span></a>, wieder aus <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span>. Ihr Quellcode f√ºr dieses Diagramm (und das ganze Kapitel) findet sich <a href="https://github.com/UBC-DSCI/introduction-to-datascience/blob/master/classification1.Rmd">hier</a>.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-cancer2_eb5da99c71f99f1f4f1eb5c6f0f75f58">
<div class="cell-output-display">
<div id="fig-cancer2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="070-knn_files/figure-html/fig-cancer2-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.3: Ein neuer Fall, bisher unklassifiziert</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Wir k√∂nnen zun√§chst den (im euklidischen Koordinatensystem) n√§chst gelegenen Fall (der ‚Äún√§chste Nachbar‚Äù) betrachten, und vereinbaren, dass wir dessen Klasse als Sch√§tzwert f√ºr den unklassiffizierten Fall √ºbernehmen, s. <a href="#fig-cancer3">Abbildung&nbsp;<span>7.4</span></a>.</p>
<div id="fig-cancer3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/cancer3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.4: Ein n√§chster Nachbar</figcaption><p></p>
</figure>
</div>
<p>Betrachten wir einen anderen zu klassifizierenden Fall, s. <a href="#fig-cancer4">Abbildung&nbsp;<span>7.5</span></a>. Ob hier die Klassifikation von ‚Äúbenign‚Äù korrekt ist? Wom√∂glich nicht, denn viele andere Nachbarn, die etwas weiter weg gelegen sind, geh√∂ren zur anderen Diagnose, malign.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-cancer4_44726798c67171e8dcadecb6e5364356">
<div class="cell-output-display">
<div id="fig-cancer4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="https://datasciencebook.ca/_main_files/figure-html/05-knn-4-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.5: Tr√ºgt der n√§chste Nachbar?</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Um die Vorhersage zu verbessern, k√∂nnen wir nicht nur den n√§chstgelegenen Nachbarn betrachten, sondern die <span class="math inline">\(k\)</span> n√§chstgelegenen, z.B. <span class="math inline">\(k=3\)</span>, s. Abb <a href="#fig-cancer5">Abbildung&nbsp;<span>7.6</span></a>.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-cancer5_df1f029b9ef6ba903c1204b9b3be2d55">
<div class="cell-output-display">
<div id="fig-cancer5" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="https://datasciencebook.ca/_main_files/figure-html/05-knn-5-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.6: kNN mit k=3</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Die Entscheidungsregel ist dann einfach eine Mehrheitsentscheidung: Wir klassifizieren den neuen Fall entsprechend der Mehrheit in den <span class="math inline">\(k\)</span> n√§chst gelegenen Nachbarn.</p>
</section><section id="berechnung-der-n√§he" class="level2" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="berechnung-der-n√§he">
<span class="header-section-number">7.5</span> Berechnung der N√§he</h2>
<p>Es gibt verschiedenen Algorithmen, um die N√§he bzw. Distanz der Nachbarn zum zu klassifizieren Fall zu berechnen.</p>
<p>Eine gebr√§uchliche Methode ist der <em>euklidische</em> Abstand, der mit Pythagoras berechnet werden kann, s. <a href="#fig-pyth1">Abbildung&nbsp;<span>7.7</span></a> aus <span class="citation" data-cites="modar">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
<div class="cell" data-hash="070-knn_cache/html/fig-pyth1_2014ade9aebcbe9e5f03fa2a93af1d94">
<div class="cell-output-display">
<div id="fig-pyth1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/distanz_crop.png" class="img-fluid figure-img" width="391"></p>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.7: Euklidischer Abstand wird mit der Regel von Pythagoras berechnet</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Wie war das noch mal?</p>
<p><span class="math display">\[c^2 = a^2 + b^2\]</span></p>
<p>Im Beispiel oben also:</p>
<p><span class="math inline">\(c^2 = 3^2 + 4^2 = 5^2\)</span></p>
<p>Damit gilt: <span class="math inline">\(c = \sqrt{c^2} = \sqrt{5^2}=5\)</span>.</p>
<p>Im 2D-Raum ist das so einfach, dass man das (fast) mit blo√üem Augenschein entscheiden kann. In mehr als 2 Dimensionen wird es aber schwierig f√ºr das Auge, wie ein <a href="https://datasciencebook.ca/classification.html#more-than-two-explanatory-variables">Beispiel</a> aus <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span> zeigt.</p>
<p>Allerdings kann man den guten alten Pythagoras auch auf Dreiecke mit mehr als zwei Dimensionen anwenden, s. <a href="#fig-pyth2">Abbildung&nbsp;<span>7.8</span></a> aus <span class="citation" data-cites="modar">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>, Kap. 21.1.2.</p>
<div id="fig-pyth2" class="quarto-layout-panel">
<figure class="figure"><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-pyth2a" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/pythagoras-crop.png" class="img-fluid figure-img" data-ref-parent="fig-pyth2"></p>
<p></p><figcaption class="figure-caption">(a) Pythagoras mit mehr als zwei Dimensionen</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-pyth2b" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/pythagoras2-crop.png" class="img-fluid figure-img" data-ref-parent="fig-pyth2"></p>
<p></p><figcaption class="figure-caption">(b) Pythagoras mit mehr als zwei Dimensionen</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Abbildung&nbsp;7.8: Pythagoras in der Ebene (links) und in 3D (rechts)‚Äù</figcaption><p></p>
</figure>
</div>
<p>Bleiben wir beim Beispiel von Anna und Berta und nehmen wir eine dritte Variable hinzu (Statistikliebe). Sagen wir, der Unterschied in dieser dritten Variable zwischen Anna und Berta betrage 2.</p>
<p>Es gilt:</p>
<p><span class="math display">\[
\begin{aligned}
e^2 &amp;= c^2 + d^2 \\
e^2 &amp;= 5^2 + 2^2 \\
e^2 &amp;= 25 + 4\\
e &amp;= \sqrt{29} \approx 5.4
\end{aligned}
\]</span></p>
</section><section id="knn-mit-tidymodels" class="level2" data-number="7.6"><h2 data-number="7.6" class="anchored" data-anchor-id="knn-mit-tidymodels">
<span class="header-section-number">7.6</span> kNN mit Tidymodels</h2>
<section id="analog-zu-timbers-et-al." class="level3" data-number="7.6.1"><h3 data-number="7.6.1" class="anchored" data-anchor-id="analog-zu-timbers-et-al.">
<span class="header-section-number">7.6.1</span> Analog zu Timbers et al.</h3>
<p>Eine Anwendung von kNN mit Tidymodels ist in <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span>, Kap. 5.6, <a href="https://datasciencebook.ca/classification.html#k-nearest-neighbors-with-tidymodels">hier</a> beschrieben.</p>
<p>Die Daten aus <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span> finden sich <a href="https://github.com/UBC-DSCI/introduction-to-datascience/tree/master/data">in diesem Github-Repo</a>-</p>
<p>Die (z-transformierten) Daten zur Tumorklassifikation k√∂nnen <a href="https://raw.githubusercontent.com/UBC-DSCI/data-science-a-first-intro-worksheets/main/worksheet_classification1/data/clean-wdbc-data.csv">hier</a> bezogen werden.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-5_a9c8405ea94f131ac00afa09370e9168">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/UBC-DSCI/introduction-to-datascience/master/data/wdbc.csv"</span></span>
<span><span class="va">cancer</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="va">data_url</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span> verwenden in Kap. 5 auch noch nicht standardisierte Daten, <code>unscales_wdbc.csv</code>, die <a href="https://raw.githubusercontent.com/UBC-DSCI/introduction-to-datascience/master/data/unscaled_wdbc.csv">hier</a> als CSV-Datei heruntergeladen werden k√∂nnen.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-6_ae4da127360c477c58b18fb76487671e">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_unscales_path</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/UBC-DSCI/introduction-to-datascience/master/data/unscaled_wdbc.csv"</span></span>
<span></span>
<span><span class="va">unscaled_cancer</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="va">cancer_unscales_path</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Class <span class="op">=</span> <span class="fu">as_factor</span><span class="op">(</span><span class="va">Class</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Class</span>, <span class="va">Area</span>, <span class="va">Smoothness</span><span class="op">)</span></span>
<span><span class="va">unscaled_cancer</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Class"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Area"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Smoothness"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"M","2":"1001.0","3":"0.11840"},{"1":"M","2":"1326.0","3":"0.08474"},{"1":"M","2":"1203.0","3":"0.10960"},{"1":"M","2":"386.1","3":"0.14250"},{"1":"M","2":"1297.0","3":"0.10030"},{"1":"M","2":"477.1","3":"0.12780"},{"1":"M","2":"1040.0","3":"0.09463"},{"1":"M","2":"577.9","3":"0.11890"},{"1":"M","2":"519.8","3":"0.12730"},{"1":"M","2":"475.9","3":"0.11860"},{"1":"M","2":"797.8","3":"0.08206"},{"1":"M","2":"781.0","3":"0.09710"},{"1":"M","2":"1123.0","3":"0.09740"},{"1":"M","2":"782.7","3":"0.08401"},{"1":"M","2":"578.3","3":"0.11310"},{"1":"M","2":"658.8","3":"0.11390"},{"1":"M","2":"684.5","3":"0.09867"},{"1":"M","2":"798.8","3":"0.11700"},{"1":"M","2":"1260.0","3":"0.09831"},{"1":"B","2":"566.3","3":"0.09779"},{"1":"B","2":"520.0","3":"0.10750"},{"1":"B","2":"273.9","3":"0.10240"},{"1":"M","2":"704.4","3":"0.10730"},{"1":"M","2":"1404.0","3":"0.09428"},{"1":"M","2":"904.6","3":"0.11210"},{"1":"M","2":"912.7","3":"0.11860"},{"1":"M","2":"644.8","3":"0.10540"},{"1":"M","2":"1094.0","3":"0.09440"},{"1":"M","2":"732.4","3":"0.10820"},{"1":"M","2":"955.1","3":"0.09847"},{"1":"M","2":"1088.0","3":"0.10640"},{"1":"M","2":"440.6","3":"0.11090"},{"1":"M","2":"899.3","3":"0.11970"},{"1":"M","2":"1162.0","3":"0.09401"},{"1":"M","2":"807.2","3":"0.10400"},{"1":"M","2":"869.5","3":"0.09610"},{"1":"M","2":"633.0","3":"0.09823"},{"1":"B","2":"523.8","3":"0.08983"},{"1":"M","2":"698.8","3":"0.09387"},{"1":"M","2":"559.2","3":"0.10160"},{"1":"M","2":"563.0","3":"0.08162"},{"1":"M","2":"371.1","3":"0.12270"},{"1":"M","2":"1104.0","3":"0.09081"},{"1":"M","2":"545.2","3":"0.10410"},{"1":"M","2":"531.5","3":"0.09714"},{"1":"M","2":"1076.0","3":"0.10990"},{"1":"B","2":"201.9","3":"0.08600"},{"1":"M","2":"534.6","3":"0.11580"},{"1":"B","2":"449.3","3":"0.10310"},{"1":"B","2":"561.0","3":"0.08752"},{"1":"B","2":"427.9","3":"0.08637"},{"1":"B","2":"571.8","3":"0.07685"},{"1":"B","2":"437.6","3":"0.08261"},{"1":"M","2":"1033.0","3":"0.11480"},{"1":"M","2":"712.8","3":"0.09056"},{"1":"B","2":"409.0","3":"0.09524"},{"1":"M","2":"1152.0","3":"0.10530"},{"1":"M","2":"656.9","3":"0.11370"},{"1":"B","2":"527.2","3":"0.08060"},{"1":"B","2":"224.5","3":"0.09752"},{"1":"B","2":"311.9","3":"0.11340"},{"1":"B","2":"221.8","3":"0.12430"},{"1":"M","2":"645.7","3":"0.10490"},{"1":"B","2":"260.9","3":"0.07721"},{"1":"M","2":"499.0","3":"0.11220"},{"1":"M","2":"668.3","3":"0.11720"},{"1":"B","2":"269.4","3":"0.10440"},{"1":"B","2":"394.1","3":"0.08139"},{"1":"B","2":"250.5","3":"0.10660"},{"1":"B","2":"502.5","3":"0.09831"},{"1":"M","2":"1130.0","3":"0.09009"},{"1":"B","2":"244.0","3":"0.09783"},{"1":"M","2":"929.4","3":"0.10710"},{"1":"M","2":"584.1","3":"0.10070"},{"1":"B","2":"470.9","3":"0.09172"},{"1":"M","2":"817.7","3":"0.09168"},{"1":"B","2":"559.2","3":"0.12910"},{"1":"M","2":"1006.0","3":"0.10650"},{"1":"M","2":"1245.0","3":"0.12860"},{"1":"B","2":"506.3","3":"0.09934"},{"1":"B","2":"401.5","3":"0.11020"},{"1":"B","2":"520.0","3":"0.10780"},{"1":"M","2":"1878.0","3":"0.10630"},{"1":"M","2":"1132.0","3":"0.12150"},{"1":"B","2":"443.3","3":"0.09723"},{"1":"M","2":"1075.0","3":"0.09874"},{"1":"M","2":"648.2","3":"0.09444"},{"1":"M","2":"1076.0","3":"0.09029"},{"1":"B","2":"466.1","3":"0.08772"},{"1":"B","2":"651.9","3":"0.11320"},{"1":"B","2":"662.7","3":"0.08974"},{"1":"M","2":"728.2","3":"0.09200"},{"1":"B","2":"551.7","3":"0.07355"},{"1":"B","2":"555.1","3":"0.10220"},{"1":"M","2":"705.6","3":"0.10390"},{"1":"M","2":"1264.0","3":"0.09078"},{"1":"B","2":"451.1","3":"0.10450"},{"1":"B","2":"294.5","3":"0.10240"},{"1":"B","2":"412.6","3":"0.08983"},{"1":"M","2":"642.5","3":"0.09752"},{"1":"M","2":"582.7","3":"0.09488"},{"1":"B","2":"143.5","3":"0.11700"},{"1":"B","2":"458.7","3":"0.08013"},{"1":"B","2":"298.3","3":"0.10050"},{"1":"B","2":"336.1","3":"0.09989"},{"1":"M","2":"530.2","3":"0.13980"},{"1":"B","2":"412.5","3":"0.11420"},{"1":"B","2":"466.7","3":"0.08477"},{"1":"M","2":"1509.0","3":"0.13260"},{"1":"B","2":"396.5","3":"0.08759"},{"1":"B","2":"290.2","3":"0.10370"},{"1":"B","2":"480.4","3":"0.09933"},{"1":"B","2":"629.9","3":"0.07837"},{"1":"B","2":"334.2","3":"0.11220"},{"1":"B","2":"230.9","3":"0.11500"},{"1":"B","2":"438.6","3":"0.09768"},{"1":"B","2":"245.2","3":"0.09462"},{"1":"M","2":"682.5","3":"0.11620"},{"1":"M","2":"782.6","3":"0.11550"},{"1":"M","2":"982.0","3":"0.08402"},{"1":"B","2":"403.3","3":"0.09373"},{"1":"M","2":"1077.0","3":"0.10540"},{"1":"M","2":"1761.0","3":"0.14470"},{"1":"B","2":"640.7","3":"0.11010"},{"1":"B","2":"553.5","3":"0.07115"},{"1":"B","2":"588.7","3":"0.08785"},{"1":"M","2":"572.6","3":"0.09258"},{"1":"M","2":"1138.0","3":"0.08217"},{"1":"B","2":"674.5","3":"0.11500"},{"1":"M","2":"1192.0","3":"0.10150"},{"1":"B","2":"455.8","3":"0.10660"},{"1":"M","2":"748.9","3":"0.10920"},{"1":"M","2":"809.8","3":"0.10080"},{"1":"B","2":"761.7","3":"0.09462"},{"1":"M","2":"1075.0","3":"0.09430"},{"1":"M","2":"506.3","3":"0.09055"},{"1":"B","2":"423.6","3":"0.10510"},{"1":"B","2":"399.8","3":"0.09639"},{"1":"M","2":"678.1","3":"0.11670"},{"1":"B","2":"384.8","3":"0.11640"},{"1":"B","2":"288.5","3":"0.09250"},{"1":"M","2":"813.0","3":"0.09721"},{"1":"B","2":"398.0","3":"0.10920"},{"1":"B","2":"512.2","3":"0.08677"},{"1":"B","2":"355.3","3":"0.07793"},{"1":"B","2":"432.8","3":"0.11520"},{"1":"M","2":"432.0","3":"0.10910"},{"1":"B","2":"689.5","3":"0.08138"},{"1":"B","2":"640.1","3":"0.09970"},{"1":"B","2":"585.0","3":"0.07944"},{"1":"B","2":"519.4","3":"0.11350"},{"1":"B","2":"203.9","3":"0.09405"},{"1":"B","2":"300.2","3":"0.10720"},{"1":"B","2":"381.9","3":"0.09754"},{"1":"B","2":"538.9","3":"0.09384"},{"1":"B","2":"460.3","3":"0.08654"},{"1":"M","2":"963.7","3":"0.11150"},{"1":"B","2":"880.2","3":"0.07445"},{"1":"B","2":"448.6","3":"0.09311"},{"1":"B","2":"366.8","3":"0.07515"},{"1":"B","2":"419.8","3":"0.10890"},{"1":"M","2":"1157.0","3":"0.08694"},{"1":"M","2":"1214.0","3":"0.11200"},{"1":"B","2":"464.5","3":"0.10120"},{"1":"M","2":"1686.0","3":"0.08439"},{"1":"B","2":"690.2","3":"0.08421"},{"1":"B","2":"357.6","3":"0.09594"},{"1":"M","2":"886.3","3":"0.08865"},{"1":"M","2":"984.6","3":"0.10490"},{"1":"B","2":"685.9","3":"0.09855"},{"1":"B","2":"464.1","3":"0.10280"},{"1":"M","2":"565.4","3":"0.09048"},{"1":"M","2":"736.9","3":"0.12570"},{"1":"B","2":"372.7","3":"0.10060"},{"1":"B","2":"349.6","3":"0.08792"},{"1":"B","2":"227.2","3":"0.09138"},{"1":"B","2":"302.4","3":"0.09699"},{"1":"M","2":"832.9","3":"0.09831"},{"1":"B","2":"526.4","3":"0.06251"},{"1":"B","2":"508.8","3":"0.08739"},{"1":"M","2":"2250.0","3":"0.10940"},{"1":"M","2":"1311.0","3":"0.11410"},{"1":"M","2":"766.6","3":"0.09597"},{"1":"B","2":"402.0","3":"0.09059"},{"1":"M","2":"710.6","3":"0.09057"},{"1":"B","2":"317.5","3":"0.09267"},{"1":"M","2":"1041.0","3":"0.08588"},{"1":"B","2":"420.3","3":"0.09774"},{"1":"B","2":"428.9","3":"0.10070"},{"1":"B","2":"463.7","3":"0.08080"},{"1":"M","2":"609.9","3":"0.10750"},{"1":"B","2":"507.4","3":"0.08749"},{"1":"B","2":"288.1","3":"0.06950"},{"1":"M","2":"477.4","3":"0.10340"},{"1":"M","2":"671.4","3":"0.10440"},{"1":"B","2":"516.4","3":"0.07941"},{"1":"M","2":"588.9","3":"0.12000"},{"1":"M","2":"1024.0","3":"0.07371"},{"1":"M","2":"1148.0","3":"0.08523"},{"1":"M","2":"642.7","3":"0.09872"},{"1":"B","2":"461.0","3":"0.09586"},{"1":"M","2":"951.6","3":"0.08968"},{"1":"M","2":"1685.0","3":"0.11410"},{"1":"M","2":"597.8","3":"0.13230"},{"1":"B","2":"481.9","3":"0.09965"},{"1":"M","2":"716.6","3":"0.08876"},{"1":"B","2":"295.4","3":"0.10890"},{"1":"M","2":"904.3","3":"0.08772"},{"1":"B","2":"529.4","3":"0.10020"},{"1":"B","2":"725.5","3":"0.08182"},{"1":"M","2":"1290.0","3":"0.09090"},{"1":"B","2":"428.0","3":"0.08871"},{"1":"M","2":"2499.0","3":"0.11420"},{"1":"M","2":"948.0","3":"0.10060"},{"1":"M","2":"610.7","3":"0.09463"},{"1":"M","2":"578.9","3":"0.10260"},{"1":"B","2":"432.2","3":"0.09363"},{"1":"B","2":"321.2","3":"0.08054"},{"1":"M","2":"1230.0","3":"0.09383"},{"1":"M","2":"1223.0","3":"0.08420"},{"1":"B","2":"568.9","3":"0.09646"},{"1":"B","2":"561.3","3":"0.10510"},{"1":"B","2":"313.1","3":"0.10610"},{"1":"M","2":"761.3","3":"0.10250"},{"1":"B","2":"546.4","3":"0.08445"},{"1":"B","2":"641.2","3":"0.09906"},{"1":"B","2":"329.6","3":"0.10530"},{"1":"B","2":"684.5","3":"0.08371"},{"1":"B","2":"496.4","3":"0.07903"},{"1":"M","2":"503.2","3":"0.10880"},{"1":"M","2":"895.0","3":"0.11410"},{"1":"B","2":"395.7","3":"0.06883"},{"1":"B","2":"386.8","3":"0.07780"},{"1":"M","2":"1319.0","3":"0.09159"},{"1":"B","2":"279.6","3":"0.08464"},{"1":"B","2":"603.4","3":"0.09070"},{"1":"M","2":"1670.0","3":"0.09509"},{"1":"M","2":"1306.0","3":"0.08355"},{"1":"B","2":"623.9","3":"0.08223"},{"1":"M","2":"920.6","3":"0.09812"},{"1":"B","2":"575.3","3":"0.09423"},{"1":"B","2":"476.5","3":"0.07926"},{"1":"B","2":"389.4","3":"0.09592"},{"1":"B","2":"590.0","3":"0.08043"},{"1":"M","2":"1155.0","3":"0.10270"},{"1":"B","2":"337.7","3":"0.10700"},{"1":"B","2":"541.6","3":"0.07215"},{"1":"B","2":"512.2","3":"0.08760"},{"1":"B","2":"347.0","3":"0.09657"},{"1":"B","2":"406.3","3":"0.10130"},{"1":"M","2":"1364.0","3":"0.10070"},{"1":"B","2":"407.4","3":"0.09345"},{"1":"M","2":"1206.0","3":"0.10620"},{"1":"M","2":"928.2","3":"0.10080"},{"1":"M","2":"1169.0","3":"0.10350"},{"1":"M","2":"602.4","3":"0.10960"},{"1":"M","2":"1207.0","3":"0.09260"},{"1":"M","2":"713.3","3":"0.13350"},{"1":"M","2":"773.5","3":"0.11090"},{"1":"M","2":"744.9","3":"0.10630"},{"1":"M","2":"1288.0","3":"0.10000"},{"1":"M","2":"933.1","3":"0.08662"},{"1":"M","2":"947.8","3":"0.08999"},{"1":"M","2":"758.6","3":"0.07840"},{"1":"M","2":"928.3","3":"0.09726"},{"1":"M","2":"1419.0","3":"0.09469"},{"1":"B","2":"346.4","3":"0.09688"},{"1":"B","2":"561.0","3":"0.07956"},{"1":"B","2":"512.2","3":"0.09425"},{"1":"B","2":"344.9","3":"0.10820"},{"1":"B","2":"632.6","3":"0.06429"},{"1":"B","2":"388.0","3":"0.09834"},{"1":"M","2":"1491.0","3":"0.09401"},{"1":"B","2":"289.9","3":"0.09037"},{"1":"M","2":"998.9","3":"0.08855"},{"1":"B","2":"435.6","3":"0.12250"},{"1":"B","2":"396.6","3":"0.09379"},{"1":"M","2":"1102.0","3":"0.08923"},{"1":"B","2":"572.3","3":"0.07948"},{"1":"B","2":"587.4","3":"0.09516"},{"1":"M","2":"1138.0","3":"0.10200"},{"1":"B","2":"427.3","3":"0.07813"},{"1":"M","2":"1145.0","3":"0.10370"},{"1":"M","2":"805.1","3":"0.10660"},{"1":"B","2":"516.6","3":"0.07818"},{"1":"B","2":"489.0","3":"0.08393"},{"1":"B","2":"441.0","3":"0.08605"},{"1":"B","2":"515.9","3":"0.06955"},{"1":"B","2":"394.1","3":"0.08020"},{"1":"B","2":"396.0","3":"0.08713"},{"1":"B","2":"651.0","3":"0.08757"},{"1":"B","2":"687.3","3":"0.08992"},{"1":"B","2":"513.7","3":"0.10050"},{"1":"B","2":"432.7","3":"0.08372"},{"1":"B","2":"492.1","3":"0.09667"},{"1":"B","2":"582.7","3":"0.09198"},{"1":"B","2":"363.7","3":"0.08518"},{"1":"M","2":"431.1","3":"0.09968"},{"1":"B","2":"633.1","3":"0.06576"},{"1":"B","2":"334.2","3":"0.10150"},{"1":"M","2":"1217.0","3":"0.11500"},{"1":"B","2":"471.3","3":"0.08451"},{"1":"M","2":"1247.0","3":"0.10800"},{"1":"B","2":"334.3","3":"0.10680"},{"1":"B","2":"403.1","3":"0.08853"},{"1":"B","2":"417.2","3":"0.07474"},{"1":"B","2":"537.3","3":"0.08511"},{"1":"B","2":"246.3","3":"0.07005"},{"1":"B","2":"566.2","3":"0.07376"},{"1":"B","2":"530.6","3":"0.08352"},{"1":"B","2":"418.7","3":"0.08814"},{"1":"B","2":"664.9","3":"0.07618"},{"1":"B","2":"504.1","3":"0.08794"},{"1":"B","2":"409.1","3":"0.08597"},{"1":"B","2":"221.2","3":"0.10740"},{"1":"B","2":"481.6","3":"0.08511"},{"1":"B","2":"461.4","3":"0.07734"},{"1":"M","2":"1027.0","3":"0.09746"},{"1":"B","2":"244.5","3":"0.09968"},{"1":"B","2":"477.3","3":"0.07557"},{"1":"B","2":"324.2","3":"0.10610"},{"1":"M","2":"1274.0","3":"0.08020"},{"1":"B","2":"504.8","3":"0.11340"},{"1":"M","2":"1264.0","3":"0.11700"},{"1":"B","2":"457.9","3":"0.08673"},{"1":"B","2":"489.9","3":"0.10280"},{"1":"B","2":"616.5","3":"0.09309"},{"1":"B","2":"446.0","3":"0.07683"},{"1":"M","2":"813.7","3":"0.11690"},{"1":"M","2":"826.8","3":"0.11650"},{"1":"M","2":"793.2","3":"0.09491"},{"1":"B","2":"514.0","3":"0.09579"},{"1":"B","2":"387.3","3":"0.10540"},{"1":"B","2":"390.0","3":"0.08306"},{"1":"B","2":"464.4","3":"0.08313"},{"1":"M","2":"918.6","3":"0.11190"},{"1":"B","2":"514.3","3":"0.09462"},{"1":"M","2":"1092.0","3":"0.09116"},{"1":"B","2":"310.8","3":"0.10070"},{"1":"M","2":"1747.0","3":"0.10690"},{"1":"B","2":"641.2","3":"0.09751"},{"1":"B","2":"280.5","3":"0.08481"},{"1":"B","2":"373.9","3":"0.10330"},{"1":"M","2":"1194.0","3":"0.09797"},{"1":"B","2":"420.3","3":"0.11500"},{"1":"B","2":"321.6","3":"0.09882"},{"1":"B","2":"445.3","3":"0.08386"},{"1":"B","2":"668.7","3":"0.08875"},{"1":"B","2":"402.7","3":"0.09076"},{"1":"B","2":"426.7","3":"0.11580"},{"1":"B","2":"421.0","3":"0.07561"},{"1":"M","2":"758.6","3":"0.12430"},{"1":"M","2":"2010.0","3":"0.11490"},{"1":"M","2":"716.6","3":"0.10240"},{"1":"B","2":"384.6","3":"0.07274"},{"1":"B","2":"485.8","3":"0.08760"},{"1":"B","2":"512.0","3":"0.10820"},{"1":"B","2":"593.7","3":"0.08743"},{"1":"B","2":"241.0","3":"0.08293"},{"1":"B","2":"278.6","3":"0.10090"},{"1":"B","2":"491.9","3":"0.07436"},{"1":"B","2":"546.1","3":"0.08582"},{"1":"B","2":"496.6","3":"0.09676"},{"1":"B","2":"838.1","3":"0.09686"},{"1":"B","2":"552.4","3":"0.07937"},{"1":"M","2":"1293.0","3":"0.09150"},{"1":"M","2":"1234.0","3":"0.09905"},{"1":"B","2":"458.4","3":"0.09231"},{"1":"M","2":"1546.0","3":"0.09384"},{"1":"M","2":"1482.0","3":"0.10630"},{"1":"M","2":"840.4","3":"0.09742"},{"1":"B","2":"711.8","3":"0.07963"},{"1":"M","2":"1386.0","3":"0.10010"},{"1":"M","2":"1335.0","3":"0.09446"},{"1":"B","2":"579.1","3":"0.08302"},{"1":"B","2":"788.5","3":"0.09880"},{"1":"B","2":"338.3","3":"0.09073"},{"1":"B","2":"562.1","3":"0.07517"},{"1":"B","2":"580.6","3":"0.08268"},{"1":"M","2":"361.6","3":"0.12160"},{"1":"B","2":"386.3","3":"0.12370"},{"1":"B","2":"372.7","3":"0.07987"},{"1":"B","2":"447.8","3":"0.06935"},{"1":"B","2":"462.9","3":"0.10420"},{"1":"B","2":"541.8","3":"0.08363"},{"1":"M","2":"664.7","3":"0.08682"},{"1":"B","2":"462.0","3":"0.08108"},{"1":"B","2":"596.6","3":"0.07026"},{"1":"B","2":"392.0","3":"0.08365"},{"1":"M","2":"1174.0","3":"0.10100"},{"1":"B","2":"321.6","3":"0.09996"},{"1":"B","2":"234.3","3":"0.10390"},{"1":"M","2":"744.7","3":"0.11600"},{"1":"M","2":"1407.0","3":"0.11670"},{"1":"B","2":"446.2","3":"0.10290"},{"1":"B","2":"609.1","3":"0.08045"},{"1":"B","2":"558.1","3":"0.10590"},{"1":"B","2":"508.3","3":"0.08044"},{"1":"B","2":"378.2","3":"0.07741"},{"1":"B","2":"431.9","3":"0.09087"},{"1":"M","2":"994.0","3":"0.12300"},{"1":"B","2":"442.7","3":"0.08872"},{"1":"B","2":"525.2","3":"0.07351"},{"1":"B","2":"507.6","3":"0.09879"},{"1":"B","2":"469.1","3":"0.08682"},{"1":"B","2":"370.0","3":"0.10040"},{"1":"B","2":"800.0","3":"0.09495"},{"1":"B","2":"514.5","3":"0.07551"},{"1":"M","2":"991.7","3":"0.10360"},{"1":"B","2":"466.1","3":"0.08685"},{"1":"B","2":"399.8","3":"0.08858"},{"1":"B","2":"373.2","3":"0.10770"},{"1":"B","2":"268.8","3":"0.07969"},{"1":"B","2":"693.7","3":"0.08515"},{"1":"M","2":"719.5","3":"0.08320"},{"1":"B","2":"433.8","3":"0.09773"},{"1":"B","2":"271.2","3":"0.10440"},{"1":"M","2":"803.1","3":"0.11200"},{"1":"B","2":"495.0","3":"0.08785"},{"1":"B","2":"380.3","3":"0.10180"},{"1":"B","2":"409.7","3":"0.08546"},{"1":"B","2":"656.1","3":"0.10310"},{"1":"B","2":"408.2","3":"0.10880"},{"1":"B","2":"575.3","3":"0.09057"},{"1":"B","2":"289.7","3":"0.10750"},{"1":"B","2":"307.3","3":"0.08117"},{"1":"B","2":"333.6","3":"0.09816"},{"1":"B","2":"359.9","3":"0.08801"},{"1":"B","2":"381.1","3":"0.08151"},{"1":"B","2":"501.3","3":"0.07896"},{"1":"M","2":"685.0","3":"0.09947"},{"1":"B","2":"467.8","3":"0.10540"},{"1":"M","2":"1250.0","3":"0.11330"},{"1":"M","2":"1110.0","3":"0.10180"},{"1":"B","2":"673.7","3":"0.08924"},{"1":"M","2":"599.5","3":"0.10600"},{"1":"B","2":"509.2","3":"0.09136"},{"1":"B","2":"611.2","3":"0.08458"},{"1":"B","2":"592.6","3":"0.08684"},{"1":"B","2":"606.5","3":"0.07966"},{"1":"B","2":"371.5","3":"0.08915"},{"1":"M","2":"928.8","3":"0.08331"},{"1":"B","2":"585.9","3":"0.08817"},{"1":"B","2":"340.9","3":"0.08142"},{"1":"M","2":"990.0","3":"0.08947"},{"1":"B","2":"441.3","3":"0.10300"},{"1":"M","2":"981.6","3":"0.09997"},{"1":"B","2":"674.8","3":"0.09179"},{"1":"B","2":"659.7","3":"0.08388"},{"1":"M","2":"1384.0","3":"0.09684"},{"1":"B","2":"432.0","3":"0.06613"},{"1":"M","2":"1191.0","3":"0.10320"},{"1":"B","2":"442.5","3":"0.08437"},{"1":"B","2":"644.2","3":"0.10990"},{"1":"B","2":"492.9","3":"0.08583"},{"1":"B","2":"557.2","3":"0.09245"},{"1":"B","2":"415.1","3":"0.09357"},{"1":"B","2":"537.9","3":"0.08791"},{"1":"B","2":"520.2","3":"0.08369"},{"1":"B","2":"290.9","3":"0.07984"},{"1":"M","2":"930.9","3":"0.09898"},{"1":"M","2":"2501.0","3":"0.10840"},{"1":"B","2":"646.1","3":"0.06995"},{"1":"B","2":"412.7","3":"0.08508"},{"1":"B","2":"537.3","3":"0.07466"},{"1":"B","2":"542.9","3":"0.08284"},{"1":"B","2":"536.9","3":"0.08675"},{"1":"B","2":"286.3","3":"0.08311"},{"1":"M","2":"980.5","3":"0.09289"},{"1":"B","2":"408.8","3":"0.11750"},{"1":"B","2":"289.1","3":"0.08946"},{"1":"B","2":"449.9","3":"0.08752"},{"1":"B","2":"686.9","3":"0.08098"},{"1":"B","2":"465.4","3":"0.07699"},{"1":"B","2":"358.9","3":"0.10070"},{"1":"B","2":"506.9","3":"0.09040"},{"1":"B","2":"618.4","3":"0.08931"},{"1":"B","2":"599.4","3":"0.06828"},{"1":"B","2":"404.9","3":"0.10460"},{"1":"M","2":"815.8","3":"0.10260"},{"1":"B","2":"455.3","3":"0.09087"},{"1":"B","2":"602.9","3":"0.07991"},{"1":"B","2":"546.3","3":"0.10710"},{"1":"B","2":"571.1","3":"0.09950"},{"1":"B","2":"747.2","3":"0.10430"},{"1":"B","2":"476.7","3":"0.09514"},{"1":"B","2":"666.0","3":"0.08641"},{"1":"M","2":"1167.0","3":"0.10890"},{"1":"B","2":"420.5","3":"0.11280"},{"1":"M","2":"857.6","3":"0.07497"},{"1":"B","2":"466.5","3":"0.08192"},{"1":"B","2":"992.1","3":"0.07838"},{"1":"M","2":"1007.0","3":"0.10010"},{"1":"B","2":"477.3","3":"0.07372"},{"1":"B","2":"538.7","3":"0.07335"},{"1":"B","2":"680.9","3":"0.09587"},{"1":"B","2":"485.6","3":"0.10760"},{"1":"B","2":"480.1","3":"0.08928"},{"1":"M","2":"1068.0","3":"0.10120"},{"1":"M","2":"1320.0","3":"0.10850"},{"1":"B","2":"689.4","3":"0.09883"},{"1":"M","2":"595.9","3":"0.11620"},{"1":"B","2":"476.3","3":"0.11580"},{"1":"M","2":"1682.0","3":"0.09342"},{"1":"B","2":"248.7","3":"0.16340"},{"1":"B","2":"272.5","3":"0.12550"},{"1":"B","2":"453.1","3":"0.10960"},{"1":"B","2":"366.5","3":"0.11940"},{"1":"B","2":"819.8","3":"0.09427"},{"1":"M","2":"731.3","3":"0.11830"},{"1":"B","2":"426.0","3":"0.08099"},{"1":"B","2":"680.7","3":"0.08472"},{"1":"M","2":"556.7","3":"0.11060"},{"1":"B","2":"658.8","3":"0.09832"},{"1":"M","2":"701.9","3":"0.09215"},{"1":"B","2":"391.2","3":"0.10490"},{"1":"M","2":"1052.0","3":"0.10680"},{"1":"M","2":"1214.0","3":"0.10370"},{"1":"B","2":"493.1","3":"0.12180"},{"1":"B","2":"493.8","3":"0.11250"},{"1":"B","2":"257.8","3":"0.13710"},{"1":"M","2":"1841.0","3":"0.10300"},{"1":"B","2":"388.1","3":"0.08511"},{"1":"B","2":"571.0","3":"0.09916"},{"1":"B","2":"293.2","3":"0.09492"},{"1":"B","2":"221.3","3":"0.10360"},{"1":"B","2":"551.1","3":"0.10750"},{"1":"B","2":"468.5","3":"0.09003"},{"1":"B","2":"594.2","3":"0.12480"},{"1":"B","2":"445.2","3":"0.11000"},{"1":"B","2":"422.9","3":"0.10730"},{"1":"B","2":"416.2","3":"0.10160"},{"1":"B","2":"575.5","3":"0.09277"},{"1":"M","2":"1299.0","3":"0.09156"},{"1":"B","2":"365.6","3":"0.09687"},{"1":"M","2":"1308.0","3":"0.10460"},{"1":"M","2":"629.8","3":"0.10380"},{"1":"B","2":"406.4","3":"0.12360"},{"1":"B","2":"178.8","3":"0.08098"},{"1":"B","2":"170.4","3":"0.08668"},{"1":"B","2":"402.9","3":"0.09984"},{"1":"B","2":"656.4","3":"0.08837"},{"1":"B","2":"668.6","3":"0.08275"},{"1":"B","2":"538.4","3":"0.08671"},{"1":"B","2":"584.8","3":"0.09578"},{"1":"B","2":"573.2","3":"0.09246"},{"1":"B","2":"324.9","3":"0.09434"},{"1":"B","2":"320.8","3":"0.08877"},{"1":"B","2":"285.7","3":"0.08491"},{"1":"B","2":"361.6","3":"0.08192"},{"1":"B","2":"360.5","3":"0.07431"},{"1":"B","2":"378.4","3":"0.09566"},{"1":"B","2":"507.9","3":"0.08276"},{"1":"B","2":"264.0","3":"0.09240"},{"1":"B","2":"514.3","3":"0.08123"},{"1":"B","2":"321.4","3":"0.09030"},{"1":"B","2":"311.7","3":"0.10030"},{"1":"B","2":"271.3","3":"0.08123"},{"1":"B","2":"657.1","3":"0.08473"},{"1":"B","2":"403.5","3":"0.09261"},{"1":"B","2":"600.4","3":"0.09929"},{"1":"B","2":"386.0","3":"0.07449"},{"1":"M","2":"716.9","3":"0.10480"},{"1":"M","2":"1347.0","3":"0.10990"},{"1":"M","2":"1479.0","3":"0.11100"},{"1":"M","2":"1261.0","3":"0.09780"},{"1":"M","2":"858.1","3":"0.08455"},{"1":"M","2":"1265.0","3":"0.11780"},{"1":"B","2":"181.0","3":"0.05263"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="rezept-definieren" class="level3" data-number="7.6.2"><h3 data-number="7.6.2" class="anchored" data-anchor-id="rezept-definieren">
<span class="header-section-number">7.6.2</span> Rezept definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-7_0b79f5e40f3fcf294142a2c996dc312f">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">uc_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">Class</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">unscaled_cancer</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">uc_recipe</span><span class="op">)</span></span>
<span><span class="co">## Recipe</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Inputs:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##       role #variables</span></span>
<span><span class="co">##    outcome          1</span></span>
<span><span class="co">##  predictor          2</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Und jetzt die z-Transformation:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-8_76990b63e55b98275c272b631e063c88">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">uc_recipe</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">uc_recipe</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">step_scale</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">step_center</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Schritte <code>prep()</code> und <code>bake()</code> sparen wir uns, da <code>fit()</code> und <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> das f√ºr uns besorgen.</p>
</section><section id="modell-definieren" class="level3" data-number="7.6.3"><h3 data-number="7.6.3" class="anchored" data-anchor-id="modell-definieren">
<span class="header-section-number">7.6.3</span> Modell definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-9_4c91b8a6d9576dcc2ce58c58bfae75c9">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">knn_spec</span> <span class="op">&lt;-</span> <span class="fu">nearest_neighbor</span><span class="op">(</span>weight_func <span class="op">=</span> <span class="st">"rectangular"</span>, neighbors <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"kknn"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span>
<span><span class="va">knn_spec</span></span>
<span><span class="co">## K-Nearest Neighbor Model Specification (classification)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Main Arguments:</span></span>
<span><span class="co">##   neighbors = 5</span></span>
<span><span class="co">##   weight_func = rectangular</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Computational engine: kknn</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="workflow-definieren" class="level3" data-number="7.6.4"><h3 data-number="7.6.4" class="anchored" data-anchor-id="workflow-definieren">
<span class="header-section-number">7.6.4</span> Workflow definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-10_ad97062b017c57ada39ca5759f57f225">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">knn_fit</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">uc_recipe</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">knn_spec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">fit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">unscaled_cancer</span><span class="op">)</span></span>
<span></span>
<span><span class="va">knn_fit</span></span>
<span><span class="co">## ‚ïê‚ïê Workflow [trained] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span><span class="co">## Preprocessor: Recipe</span></span>
<span><span class="co">## Model: nearest_neighbor()</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co">## 2 Recipe Steps</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚Ä¢ step_scale()</span></span>
<span><span class="co">## ‚Ä¢ step_center()</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## kknn::train.kknn(formula = ..y ~ ., data = data, ks = min_rows(5,     data, 5), kernel = ~"rectangular")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Type of response variable: nominal</span></span>
<span><span class="co">## Minimal misclassification: 0.1107206</span></span>
<span><span class="co">## Best kernel: rectangular</span></span>
<span><span class="co">## Best k: 5</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="vorhersagen" class="level3" data-number="7.6.5"><h3 data-number="7.6.5" class="anchored" data-anchor-id="vorhersagen">
<span class="header-section-number">7.6.5</span> Vorhersagen</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-11_14ea0398b379026d0a93e791b5925aa8">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">new_observation</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>Area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1500</span><span class="op">)</span>, Smoothness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.075</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">prediction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">knn_fit</span>, <span class="va">new_observation</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prediction</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".pred_class"],"name":[1],"type":["fct"],"align":["left"]}],"data":[{"1":"B"},{"1":"M"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section></section><section id="mit-train-test-aufteilung" class="level2" data-number="7.7"><h2 data-number="7.7" class="anchored" data-anchor-id="mit-train-test-aufteilung">
<span class="header-section-number">7.7</span> Mit Train-Test-Aufteilung</h2>
<p>Im Kapitel 5 greifen <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span> die Aufteilung in Train- vs.&nbsp;Test-Sample noch nicht auf (aber in Kapitel 6).</p>
<p>Da in diesem Kurs diese Aufteilung aber schon besprochen wurde, soll dies hier auch dargestellt werden.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-12_c57587daf28e6ec81b046962dab74b19">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_split</span> <span class="op">&lt;-</span> <span class="fu">initial_split</span><span class="op">(</span><span class="va">cancer</span>, prop <span class="op">=</span> <span class="fl">0.75</span>, strata <span class="op">=</span> <span class="va">Class</span><span class="op">)</span></span>
<span><span class="va">cancer_train</span> <span class="op">&lt;-</span> <span class="fu">training</span><span class="op">(</span><span class="va">cancer_split</span><span class="op">)</span></span>
<span><span class="va">cancer_test</span> <span class="op">&lt;-</span> <span class="fu">testing</span><span class="op">(</span><span class="va">cancer_split</span><span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="rezept-definieren-1" class="level3" data-number="7.7.1"><h3 data-number="7.7.1" class="anchored" data-anchor-id="rezept-definieren-1">
<span class="header-section-number">7.7.1</span> Rezept definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-13_e2763648e252ea913dd514f963efa051">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">Class</span> <span class="op">~</span> <span class="va">Smoothness</span> <span class="op">+</span> <span class="va">Concavity</span>, data <span class="op">=</span> <span class="va">cancer_train</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">step_scale</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">step_center</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="modell-definieren-1" class="level3" data-number="7.7.2"><h3 data-number="7.7.2" class="anchored" data-anchor-id="modell-definieren-1">
<span class="header-section-number">7.7.2</span> Modell definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-14_a7089d594477a4eb7f8f7a331ffa4486">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">knn_spec</span> <span class="op">&lt;-</span> <span class="fu">nearest_neighbor</span><span class="op">(</span>weight_func <span class="op">=</span> <span class="st">"rectangular"</span>, neighbors <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_engine</span><span class="op">(</span><span class="st">"kknn"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="workflow-definieren-1" class="level3" data-number="7.7.3"><h3 data-number="7.7.3" class="anchored" data-anchor-id="workflow-definieren-1">
<span class="header-section-number">7.7.3</span> Workflow definieren</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-15_b4009c20af7c4164f1505d738310224f">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">knn_fit</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">cancer_recipe</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">knn_spec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">fit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cancer_train</span><span class="op">)</span></span>
<span></span>
<span><span class="va">knn_fit</span></span>
<span><span class="co">## ‚ïê‚ïê Workflow [trained] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</span></span>
<span><span class="co">## Preprocessor: Recipe</span></span>
<span><span class="co">## Model: nearest_neighbor()</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co">## 2 Recipe Steps</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚Ä¢ step_scale()</span></span>
<span><span class="co">## ‚Ä¢ step_center()</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## kknn::train.kknn(formula = ..y ~ ., data = data, ks = min_rows(3,     data, 5), kernel = ~"rectangular")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Type of response variable: nominal</span></span>
<span><span class="co">## Minimal misclassification: 0.1220657</span></span>
<span><span class="co">## Best kernel: rectangular</span></span>
<span><span class="co">## Best k: 3</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="vorhersagen-1" class="level3" data-number="7.7.4"><h3 data-number="7.7.4" class="anchored" data-anchor-id="vorhersagen-1">
<span class="header-section-number">7.7.4</span> Vorhersagen</h3>
<p>Im Gegensatz zu <span class="citation" data-cites="timbers_data_2022">Timbers, Campbell, und Lee (<a href="references.html#ref-timbers_data_2022" role="doc-biblioref">2022</a>)</span> verwenden wir hier <code>last_fit()</code> und <code>collect_metrics()</code>, da wir dies bereits eingef√ºhrt haben und k√ºnftig darauf aufbauen werden.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-16_266937bf8d29b03af0840d4024457a58">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_test_fit</span> <span class="op">&lt;-</span> <span class="fu">last_fit</span><span class="op">(</span><span class="va">knn_fit</span>, <span class="va">cancer_split</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cancer_test_fit</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["splits"],"name":[1],"type":["list"],"align":["right"]},{"label":["id"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".metrics"],"name":[3],"type":["list"],"align":["right"]},{"label":[".notes"],"name":[4],"type":["list"],"align":["right"]},{"label":[".predictions"],"name":[5],"type":["list"],"align":["right"]},{"label":[".workflow"],"name":[6],"type":["list"],"align":["right"]}],"data":[{"1":"<S3: initial_split>","2":"train/test split","3":"<tibble[,4]>","4":"<tibble[,3]>","5":"<tibble[,6]>","6":"<S3: workflow>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="modellg√ºte" class="level3" data-number="7.7.5"><h3 data-number="7.7.5" class="anchored" data-anchor-id="modellg√ºte">
<span class="header-section-number">7.7.5</span> Modellg√ºte</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-17_9ab63ac66998d834129027442d27df4e">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_test_fit</span> <span class="op">%&gt;%</span> <span class="fu">collect_metrics</span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"accuracy","2":"binary","3":"0.9020979","4":"Preprocessor1_Model1"},{"1":"roc_auc","2":"binary","3":"0.9121593","4":"Preprocessor1_Model1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Die eigentlichen Predictions stecken in der Listenspalte <code>.predictions</code> im Fit-Objekt:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-18_784b7098ccc96319df542abce9e9cc7c">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">cancer_test_fit</span><span class="op">)</span></span>
<span><span class="co">## [1] "splits"       "id"           ".metrics"     ".notes"       ".predictions"</span></span>
<span><span class="co">## [6] ".workflow"</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Genau genommen ist <code>.predictions</code> eine Spalte, in der in jeder Zeile (und damit Zelle) eine Tabelle (Tibble) steht. Wir haben nur eine Zeile und wollen das erste Element dieser Spalte herausziehen, die Vorhersagen (Wahrscheinlichkeit) f√ºr begigne Struktur ($; die Spalte hei√üt √ºbrigens <code>.pred_B</code>). Au√üerdem brauchen wir die tats√§chlichen Diagnosen, <span class="math inline">\(y\)</span>, die ‚Äúwohnen‚Äù in der Spalte mit Namen <code>Class</code>. Da hilft <code>pluck()</code>.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-19_72911eaf116d7687994112bc234c5f6b">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_test_fit</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">pluck</span><span class="op">(</span><span class="st">".predictions"</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## tibble [143 √ó 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ .pred_B    : num [1:143] 0 0 0 0 0 ...</span></span>
<span><span class="co">##  $ .pred_M    : num [1:143] 1 1 1 1 1 ...</span></span>
<span><span class="co">##  $ .row       : int [1:143] 1 3 5 15 25 31 33 36 37 38 ...</span></span>
<span><span class="co">##  $ .pred_class: Factor w/ 2 levels "B","M": 2 2 2 2 2 2 2 1 2 1 ...</span></span>
<span><span class="co">##  $ Class      : Factor w/ 2 levels "B","M": 2 2 2 2 2 2 2 2 2 1 ...</span></span>
<span><span class="co">##  $ .config    : chr [1:143] "Preprocessor1_Model1" "Preprocessor1_Model1" "Preprocessor1_Model1" "Preprocessor1_Model1" ...</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="070-knn_cache/html/comp-conf_091713f3f5fbc8896c28cd13db1295b3">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer_test_predictions</span> <span class="op">&lt;-</span> </span>
<span><span class="va">cancer_test_fit</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pluck</span><span class="op">(</span><span class="st">".predictions"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">confusion</span> <span class="op">&lt;-</span> <span class="va">cancer_test_predictions</span> <span class="op">|&gt;</span></span>
<span>             <span class="fu">conf_mat</span><span class="op">(</span>truth <span class="op">=</span> <span class="va">Class</span>, estimate <span class="op">=</span> <span class="va">.pred_class</span><span class="op">)</span></span>
<span></span>
<span><span class="va">confusion</span></span>
<span><span class="co">##           Truth</span></span>
<span><span class="co">## Prediction  B  M</span></span>
<span><span class="co">##          B 85  9</span></span>
<span><span class="co">##          M  5 44</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="visualisierung" class="level3" data-number="7.7.6"><h3 data-number="7.7.6" class="anchored" data-anchor-id="visualisierung">
<span class="header-section-number">7.7.6</span> Visualisierung</h3>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-20_da577e90c641c4198e448edb42724c07">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">autoplot</span><span class="op">(</span><span class="va">confusion</span>, type <span class="op">=</span> <span class="st">"mosaic"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="070-knn_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">autoplot</span><span class="op">(</span><span class="va">confusion</span>, type <span class="op">=</span> <span class="st">"heatmap"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Beobachtung"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Vorhersage"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Konfusionsmatrix"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="070-knn_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="kennzahlen-der-klassifikation" class="level2" data-number="7.8"><h2 data-number="7.8" class="anchored" data-anchor-id="kennzahlen-der-klassifikation">
<span class="header-section-number">7.8</span> Kennzahlen der Klassifikation</h2>
<p>In <span class="citation" data-cites="modar">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>, Kap. 19.6, findet sich einige Erkl√§rung zu Kennzahlen der Klassifikationsg√ºte.</p>
<p>Ein Test kann vier verschiedenen Ergebnisse haben:</p>
<div class="cell" data-hash="070-knn_cache/html/class-stats_481fff3aa3a3dace079614e9d54a8e97">
<div class="cell-output-display">

<div id="ibrcrpjtlm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ibrcrpjtlm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibrcrpjtlm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibrcrpjtlm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibrcrpjtlm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibrcrpjtlm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibrcrpjtlm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ibrcrpjtlm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibrcrpjtlm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibrcrpjtlm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibrcrpjtlm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibrcrpjtlm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibrcrpjtlm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibrcrpjtlm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibrcrpjtlm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ibrcrpjtlm .gt_from_md > :first-child {
  margin-top: 0;
}

#ibrcrpjtlm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibrcrpjtlm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibrcrpjtlm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ibrcrpjtlm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibrcrpjtlm .gt_row_group_first td {
  border-top-width: 2px;
}

#ibrcrpjtlm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibrcrpjtlm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ibrcrpjtlm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibrcrpjtlm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ibrcrpjtlm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibrcrpjtlm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ibrcrpjtlm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ibrcrpjtlm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ibrcrpjtlm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibrcrpjtlm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibrcrpjtlm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibrcrpjtlm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibrcrpjtlm .gt_left {
  text-align: left;
}

#ibrcrpjtlm .gt_center {
  text-align: center;
}

#ibrcrpjtlm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibrcrpjtlm .gt_font_normal {
  font-weight: normal;
}

#ibrcrpjtlm .gt_font_bold {
  font-weight: bold;
}

#ibrcrpjtlm .gt_font_italic {
  font-style: italic;
}

#ibrcrpjtlm .gt_super {
  font-size: 65%;
}

#ibrcrpjtlm .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ibrcrpjtlm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibrcrpjtlm .gt_indent_1 {
  text-indent: 5px;
}

#ibrcrpjtlm .gt_indent_2 {
  text-indent: 10px;
}

#ibrcrpjtlm .gt_indent_3 {
  text-indent: 15px;
}

#ibrcrpjtlm .gt_indent_4 {
  text-indent: 20px;
}

#ibrcrpjtlm .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped" data-quarto-postprocess="true">
<caption>Vier Arten von Ergebnissen von Klassifikationen</caption>
<thead class="gt_col_headings"><tr class="header">
<th id="Wahrheit" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Wahrheit</th>
<th id="Als negativ (-) vorhergesagt" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Als negativ (-) vorhergesagt</th>
<th id="Als positiv (+) vorhergesagt" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Als positiv (+) vorhergesagt</th>
<th id="Summe" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Summe</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Wahrheit">In Wahrheit negativ (-)</td>
<td class="gt_row gt_left" headers="Als negativ (-) vorhergesagt">Richtig negativ (RN)</td>
<td class="gt_row gt_left" headers="Als positiv (+) vorhergesagt">Falsch positiv (FP)</td>
<td class="gt_row gt_left" headers="Summe">N</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Wahrheit">In Wahrheit positiv (+)</td>
<td class="gt_row gt_left" headers="Als negativ (-) vorhergesagt">Falsch negativ (FN)</td>
<td class="gt_row gt_left" headers="Als positiv (+) vorhergesagt">Richtig positiv (RN)</td>
<td class="gt_row gt_left" headers="Summe">P</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Wahrheit">Summe</td>
<td class="gt_row gt_left" headers="Als negativ (-) vorhergesagt">N*</td>
<td class="gt_row gt_left" headers="Als positiv (+) vorhergesagt">P*</td>
<td class="gt_row gt_left" headers="Summe">N+P</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Es gibt eine verwirrende Vielfalt von Kennzahlen, um die G√ºte einer Klassifikation einzusch√§tzen. Hier sind einige davon:</p>
<div class="cell" data-hash="070-knn_cache/html/diag-stats_fa744e92740cb6f84ee8cf8e4426c57a">
<div class="cell-output-display">

<div id="pkelsfeekg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#pkelsfeekg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pkelsfeekg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pkelsfeekg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pkelsfeekg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pkelsfeekg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pkelsfeekg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pkelsfeekg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pkelsfeekg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pkelsfeekg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pkelsfeekg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pkelsfeekg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pkelsfeekg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pkelsfeekg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pkelsfeekg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pkelsfeekg .gt_from_md > :first-child {
  margin-top: 0;
}

#pkelsfeekg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pkelsfeekg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pkelsfeekg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pkelsfeekg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pkelsfeekg .gt_row_group_first td {
  border-top-width: 2px;
}

#pkelsfeekg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkelsfeekg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pkelsfeekg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pkelsfeekg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pkelsfeekg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkelsfeekg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pkelsfeekg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pkelsfeekg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pkelsfeekg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pkelsfeekg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkelsfeekg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pkelsfeekg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pkelsfeekg .gt_left {
  text-align: left;
}

#pkelsfeekg .gt_center {
  text-align: center;
}

#pkelsfeekg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pkelsfeekg .gt_font_normal {
  font-weight: normal;
}

#pkelsfeekg .gt_font_bold {
  font-weight: bold;
}

#pkelsfeekg .gt_font_italic {
  font-style: italic;
}

#pkelsfeekg .gt_super {
  font-size: 65%;
}

#pkelsfeekg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#pkelsfeekg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pkelsfeekg .gt_indent_1 {
  text-indent: 5px;
}

#pkelsfeekg .gt_indent_2 {
  text-indent: 10px;
}

#pkelsfeekg .gt_indent_3 {
  text-indent: 15px;
}

#pkelsfeekg .gt_indent_4 {
  text-indent: 20px;
}

#pkelsfeekg .gt_indent_5 {
  text-indent: 25px;
}
</style>

Gel√§ufige Kennwerte der Klassifikation.
F: Falsch. R: Richtig. P: Positiv. N: Negativ
Name
Definition
Synonyme
FP-Rate
FP/N
Alphafehler, Typ-1-Fehler, 1-Spezifit√§t, Fehlalarm
RP-Rate
RP/N
Power, Sensitivit√§t, 1-Betafehler, Recall
FN-Rate
FN/N
Fehlender Alarm, Befafehler
RN-Rate
RN/N
Spezifit√§t, 1-Alphafehler
Pos. Vorhersagewert
RP/P*
Pr√§zision, Relevanz
Neg. Vorhersagewert
RN/N*
Segreganz
Richtigkeit
(RP+RN)/(N+P)
Korrektklassifikationsrate, Gesamtgenauigkeit

</div>
</div>
</div>
</section><section id="krebstest-beispiel" class="level2" data-number="7.9"><h2 data-number="7.9" class="anchored" data-anchor-id="krebstest-beispiel">
<span class="header-section-number">7.9</span> Krebstest-Beispiel</h2>
<p>Betrachten wir Daten eines fiktiven Krebstest, aber realistischen Daten.</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-21_92109ebfeb22ad479b74e2376cb1a8b8">
<pre><code>## # A tibble: 1 √ó 7
##   format width height colorspace matte filesize density
##   &lt;chr&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;lgl&gt;    &lt;int&gt; &lt;chr&gt;  
## 1 PNG      500    429 sRGB       TRUE     40643 72x72</code></pre>
<div class="cell-output-display">
<p><img src="070-knn_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="250"></p>
</div>
</div>
<p>Wie gut ist dieser Test? Berechnen wir einige Kennzahlen.</p>
<p>Da die Funktionen zur Klassifikation stets einen Faktor wollen, wandeln wir die relevanten Spalten zuerst in einen Faktor um (aktuell sind es numerische Spalten).</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-22_466293dcdf8ffe28e6bc5f8d7774b0ad">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">krebstest</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">krebstest</span>  <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Krebs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Krebs</span><span class="op">)</span>,</span>
<span>         Test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Test</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Gesamtgenauigkeit:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-23_fcef758368caa968d8b6e4b18956cfdd">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">accuracy</span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"accuracy","2":"binary","3":"0.87"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Sensitivit√§t:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-24_b858f961ca5d2021a9460357399d5f1f">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">sens</span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"sens","2":"binary","3":"0.8842105"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Spezifit√§t:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-25_087b2729c1f54667a3dd620b7aa8d5ec">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">yardstick</span><span class="fu">::</span><span class="fu"><a href="https://yardstick.tidymodels.org/reference/spec.html">spec</a></span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"spec","2":"binary","3":"0.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Kappa:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-26_ca1ede4baf5b753935cf920e8c3c86af">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">yardstick</span><span class="fu">::</span><span class="fu"><a href="https://yardstick.tidymodels.org/reference/kap.html">kap</a></span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"kap","2":"binary","3":"0.2613636"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Positiver Vorhersagewert:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-27_c2a34c2cf0de208883c6c4e627ec056b">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ppv</span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"ppv","2":"binary","3":"0.9767442"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Negativer Vorhersagewert:</p>
<div class="cell" data-hash="070-knn_cache/html/unnamed-chunk-28_8e755bae3ff0406a5d5fba112f84284b">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">npv</span><span class="op">(</span><span class="va">krebstest</span>, truth <span class="op">=</span> <span class="va">Krebs</span>, estimate <span class="op">=</span> <span class="va">Test</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[".metric"],"name":[1],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimate"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"npv","2":"binary","3":"0.2142857"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>W√§hrend Sensitivit√§t und Spezitivit√§t sehr hoch sind, ist die der negative Vorhersagewert sehr gering:</p>
<p>Wenn man einen positiven Test erh√§lt, ist die Wahrscheinlichkeit, in Wahrheit krank zu sein gering, zum Gl√ºck!</p>
</section><section id="aufgaben" class="level2" data-number="7.10"><h2 data-number="7.10" class="anchored" data-anchor-id="aufgaben">
<span class="header-section-number">7.10</span> Aufgaben</h2>
<ul>
<li>Arbeiten Sie sich so gut als m√∂glich durch <a href="https://github.com/sebastiansauer/covid-icu">diese Analyse zum Verlauf von Covid-F√§llen</a>
</li>
<li><a href="https://onezero.blog/modelling-binary-logistic-regression-using-tidymodels-library-in-r-part-1/">Fallstudie zur Modellierung einer logististischen Regression mit tidymodels</a></li>
<li><a href="https://juliasilge.com/blog/multinomial-volcano-eruptions/">Fallstudie zu Vulkanausbr√ºchen</a></li>
<li><a href="https://juliasilge.com/blog/himalayan-climbing/">Fallstudie Himalaya</a></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-rhys" class="csl-entry" role="listitem">
Rhys, Hefin. 2020. <em>Machine Learning with R, the tidyverse, and mlr</em>. Shelter Island, <span>NY</span>: Manning publications.
</div>
<div id="ref-modar" class="csl-entry" role="listitem">
Sauer, Sebastian. 2019. <em>Moderne Datenanalyse mit R: Daten einlesen, aufbereiten, visualisieren und modellieren</em>. 1. Auflage 2019. <span>FOM</span>-Edition. Wiesbaden: Springer. <a href="https://www.springer.com/de/book/9783658215866">https://www.springer.com/de/book/9783658215866</a>.
</div>
<div id="ref-timbers_data_2022" class="csl-entry" role="listitem">
Timbers, Tiffany-Anne, Trevor Campbell, und Melissa Lee. 2022. <em>Data science: an introduction</em>. First edition. Statistics. Boca Raton: <span>CRC</span> Press.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./060-tidymodels.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">tidymodels</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./080-Resampling-Tuning.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Resampling und Tuning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>