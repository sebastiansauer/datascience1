<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kapitel 8 Logistische Regression | DataScience1</title>
<meta name="author" content="Sebastian Sauer">
<meta name="description" content="Ben√∂tigte R-Pakete f√ºr dieses Kapitel:  8.1 Lernsteuerung   8.1.1 Vorbereitung Frischen Sie Ihr Wissen zur logistischen Regression auf bzw. machen Sie sich mit den Grundlagen des Verfahrens...">
<meta name="generator" content="bookdown 0.26.2 with bs4_book()">
<meta property="og:title" content="Kapitel 8 Logistische Regression | DataScience1">
<meta property="og:type" content="book">
<meta property="og:description" content="Ben√∂tigte R-Pakete f√ºr dieses Kapitel:  8.1 Lernsteuerung   8.1.1 Vorbereitung Frischen Sie Ihr Wissen zur logistischen Regression auf bzw. machen Sie sich mit den Grundlagen des Verfahrens...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kapitel 8 Logistische Regression | DataScience1">
<meta name="twitter:description" content="Ben√∂tigte R-Pakete f√ºr dieses Kapitel:  8.1 Lernsteuerung   8.1.1 Vorbereitung Frischen Sie Ihr Wissen zur logistischen Regression auf bzw. machen Sie sich mit den Grundlagen des Verfahrens...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="libs/es6shim-0.35.6/es6shim.js"></script><script src="libs/es7shim-6.0.0/es7shim.js"></script><script src="libs/graphre-0.1.3/graphre.js"></script><script src="libs/nomnoml-1.3.1/nomnoml.js"></script><script src="libs/nomnoml-binding-0.2.3/nomnoml.js"></script><script src="libs/d3-3.3.8/d3.min.js"></script><script src="libs/dagre-0.4.0/dagre-d3.min.js"></script><link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><script src="libs/chromatography-0.1/chromatography.js"></script><script src="libs/DiagrammeR-binding-1.0.6.1/DiagrammeR.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style-bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Grundlagen der Prognosemodellierung üîÆüß∞">DataScience1</a>:
        <small class="text-muted">Grundlagen der Prognosemodellierung üîÆüß∞</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Zu diesem Buch</a></li>
<li><a class="" href="hinweise.html"><span class="header-section-number">1</span> Hinweise</a></li>
<li><a class="" href="pr%C3%BCfung.html"><span class="header-section-number">2</span> Pr√ºfung</a></li>
<li class="book-part">Themen</li>
<li><a class="" href="statistisches-lernen.html"><span class="header-section-number">3</span> Statistisches Lernen</a></li>
<li><a class="" href="r-zweiter-blick.html"><span class="header-section-number">4</span> R, zweiter Blick</a></li>
<li><a class="" href="tidymodels.html"><span class="header-section-number">5</span> tidymodels</a></li>
<li><a class="" href="knn.html"><span class="header-section-number">6</span> kNN</a></li>
<li><a class="" href="resampling-und-tuning.html"><span class="header-section-number">7</span> Resampling und Tuning</a></li>
<li><a class="active" href="logistische-regression.html"><span class="header-section-number">8</span> Logistische Regression</a></li>
<li><a class="" href="entscheidungsb%C3%A4ume.html"><span class="header-section-number">9</span> Entscheidungsb√§ume</a></li>
<li><a class="" href="ensemble-lerner.html"><span class="header-section-number">10</span> Ensemble Lerner</a></li>
<li><a class="" href="regularisierte-modelle.html"><span class="header-section-number">11</span> Regularisierte Modelle</a></li>
<li><a class="" href="kaggle.html"><span class="header-section-number">12</span> Kaggle</a></li>
<li><a class="" href="der-rote-faden.html"><span class="header-section-number">13</span> Der rote Faden</a></li>
<li><a class="" href="dimensionsreduktion.html"><span class="header-section-number">14</span> Dimensionsreduktion</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/sebastiansauer/datascience1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="logistische-regression" class="section level1" number="8">
<h1>
<span class="header-section-number">Kapitel 8</span> Logistische Regression<a class="anchor" aria-label="anchor" href="#logistische-regression"><i class="fas fa-link"></i></a>
</h1>
<!-- ```{r global-knitr-options, include=FALSE} -->
<!--   knitr::opts_chunk$set( -->
<!--   fig.pos = 'H', -->
<!--   fig.asp = 0.618, -->
<!--   fig.align='center', -->
<!--   fig.width = 5, -->
<!--   out.width = "100%", -->
<!--   fig.cap = "",  -->
<!--   fig.path = "chunk-img/tidymodels", -->
<!--   dpi = 300, -->
<!--   # tidy = TRUE, -->
<!--   echo = TRUE, -->
<!--   message = FALSE, -->
<!--   warning = FALSE, -->
<!--   cache = TRUE, -->
<!--   fig.show = "hold") -->
<!-- ``` -->
<p>Ben√∂tigte R-Pakete f√ºr dieses Kapitel:</p>
<div id="lernsteuerung-5" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> Lernsteuerung<a class="anchor" aria-label="anchor" href="#lernsteuerung-5"><i class="fas fa-link"></i></a>
</h2>
<!-- Chapter Start sections: Lernziele, Literatur, Hinweise, ... -->
<div id="vorbereitung-5" class="section level3" number="8.1.1">
<h3>
<span class="header-section-number">8.1.1</span> Vorbereitung<a class="anchor" aria-label="anchor" href="#vorbereitung-5"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Frischen Sie Ihr Wissen zur logistischen Regression auf bzw. machen Sie sich mit den Grundlagen des Verfahrens vertraut.</li>
</ul>
</div>
<div id="lernziele-6" class="section level3" number="8.1.2">
<h3>
<span class="header-section-number">8.1.2</span> Lernziele<a class="anchor" aria-label="anchor" href="#lernziele-6"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Sie verstehen den Zusammenhang von linearen und logistischen Modellen</li>
<li>Sie k√∂nnen die logistische Regression mit Methoden von tidymodels anwenden</li>
</ul>
</div>
<div id="literatur-6" class="section level3" number="8.1.3">
<h3>
<span class="header-section-number">8.1.3</span> Literatur<a class="anchor" aria-label="anchor" href="#literatur-6"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Rhys, Kap. 4</li>
</ul>
</div>
</div>
<div id="intuitive-erkl√§rung-1" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> Intuitive Erkl√§rung<a class="anchor" aria-label="anchor" href="#intuitive-erkl%C3%A4rung-1"><i class="fas fa-link"></i></a>
</h2>
<p>Die <em>logistische Reression</em> ist ein Spezialfall des linearen Modells (lineare Regression),
der f√ºr <em>bin√§re</em> (dichotom) AV eingesetzt wird (es gibt auch eine Variante f√ºr multinominale AV).
Es k√∂nnen eine oder mehrere UV in eine logistische Regression einflie√üen,
mit beliebigem Skalenniveau.</p>
<p>Beispiele f√ºr Forschungsfragen, die mit der logistischen Regression modelliert werden sind:</p>
<ul>
<li>Welche Faktoren sind pr√§diktiv, um vorherzusagen, ob jemand einen Kredit zur√ºckzahlen kann oder nicht?</li>
<li>Haben weibliche Passagiere aus der 1. Klasse eine h√∂here √úberlebenschance als andere Personen auf der Titanic?</li>
<li>Welche Faktoren h√§ngen damit zusammen, ob ein Kunde eine Webseite verl√§sst, bevor er einen Kauf abschlie√üt?</li>
</ul>
<p>Der Name stammt von der <a href="https://en.wikipedia.org/wiki/Logistic_function">logistischen Funktion</a>,
die man in der einfachsten Form so darstellen kann:</p>
<p><span class="math display">\[f(x) = \frac{x}{1+e^{-x}}\]</span></p>
<p>Da die AV als dichotom modelliert wird, spricht man von einer <em>Klassifikation</em>.</p>
<p>Allerdings ist das Modell reichhaltiger als eine blo√üe Klassifikation,
die (im bin√§ren Fall) nur 1 Bit Information liefert: ‚Äúja‚Äù vs.¬†‚Äúnein‚Äù bzw. 0 vs.¬†1.</p>
<p>Das Modell liefert n√§mlich nicht nur eine Klassifikation zur√ºck,
sondern auch eine <em>Indikation der St√§rke</em> (epistemologisch) der Klassenzugeh√∂rigkeit.</p>
<p>Einfach gesagt hei√üt das,
dass die logistische Regression eine Wahrscheinlichkeit der Klassenzugeh√∂rigkeit zur√ºckliefert.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:logist-regr"></span>
<div id="htmlwidget-7cf50ab0006e507cf047" style="width:100%;height:300px;" class="nomnoml html-widget"></div>
<script type="application/json" data-for="htmlwidget-7cf50ab0006e507cf047">{"x":{"code":"\n#fill: #FEFEFF\n#lineWidth: 1\n#zoom: 4\n#direction: right\n\n#direction: right\n [Daten] -> [Modell] \n [Modell] -> [Wskt] \n [Wskt] -> [Klassifikation]\n","svg":false},"evals":[],"jsHooks":[]}</script><p class="caption">
Figure 8.1: Definition eines Models in tidymodels
</p>
</div>
</div>
<div id="profil" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Profil<a class="anchor" aria-label="anchor" href="#profil"><i class="fas fa-link"></i></a>
</h2>
<p>Das Profil des Modells kann man wie folgt charakterisieren, vgl. Tab. <a href="logistische-regression.html#tab:prof-logist">8.1</a>.</p>
<div id="lgpruuecde" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#lgpruuecde .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lgpruuecde .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgpruuecde .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lgpruuecde .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lgpruuecde .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgpruuecde .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgpruuecde .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lgpruuecde .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lgpruuecde .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lgpruuecde .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lgpruuecde .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lgpruuecde .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#lgpruuecde .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lgpruuecde .gt_from_md > :first-child {
  margin-top: 0;
}

#lgpruuecde .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lgpruuecde .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lgpruuecde .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#lgpruuecde .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgpruuecde .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#lgpruuecde .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgpruuecde .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lgpruuecde .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lgpruuecde .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgpruuecde .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgpruuecde .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#lgpruuecde .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgpruuecde .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#lgpruuecde .gt_left {
  text-align: left;
}

#lgpruuecde .gt_center {
  text-align: center;
}

#lgpruuecde .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lgpruuecde .gt_font_normal {
  font-weight: normal;
}

#lgpruuecde .gt_font_bold {
  font-weight: bold;
}

#lgpruuecde .gt_font_italic {
  font-style: italic;
}

#lgpruuecde .gt_super {
  font-size: 65%;
}

#lgpruuecde .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<div class="inline-table"><table class="gt_table">
<caption>
<span id="tab:prof-logist">Table 8.1: </span>Profil der logistischen Regression</caption>
  
  <thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Merkmal</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Logistische Regression</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">Klassifikation</td>
<td class="gt_row gt_left">ja</td>
</tr>
<tr>
<td class="gt_row gt_left">Regression</td>
<td class="gt_row gt_left">nein</td>
</tr>
<tr>
<td class="gt_row gt_left">Lerntyp</td>
<td class="gt_row gt_left">√ºberwacht</td>
</tr>
<tr>
<td class="gt_row gt_left">parametrisch</td>
<td class="gt_row gt_left">ja</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="warum-nicht-die-lineare-regression-verwenden" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> Warum nicht die lineare Regression verwenden?<a class="anchor" aria-label="anchor" href="#warum-nicht-die-lineare-regression-verwenden"><i class="fas fa-link"></i></a>
</h2>
<p><em>Forschungsfrage</em>: Kann man anhand des Spritverbrauchs vorhersagen, ob ein Auto eine Automatik- bzw. ein manuelle Schaltung hat? Anders gesagt: H√§ngen Spritverbrauch und Getriebeart? (Datensatz <code>mtcars</code>)</p>
<pre><code>## (Intercept)          iv 
##   0.4062500   0.2993109</code></pre>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/unnamed-chunk-4-1.png" width="70%" style="display: block; margin: auto;"></div>
<p><span class="math inline">\(Pr(\text{am}=1|m91,\text{mpg_z}=0) = 0.46\)</span>:
Die Wahrscheinlichkeit einer manuelle Schaltung,
gegeben einem durchschnittlichen Verbrauch (und dem Modell <code>m81</code>) liegt bei knapp 50%.</p>
<div id="lineare-modelle-running-wild" class="section level3" number="8.4.1">
<h3>
<span class="header-section-number">8.4.1</span> Lineare Modelle running wild<a class="anchor" aria-label="anchor" href="#lineare-modelle-running-wild"><i class="fas fa-link"></i></a>
</h3>
<p>Wie gro√ü ist die Wahrscheinlichkeit f√ºr eine manuelle Schaltung ‚Ä¶</p>
<ul>
<li>‚Ä¶ bei <code>mpg_z = -2</code>?</li>
</ul>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">m81</span>, newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>iv <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##          1 
## -0.1923719</code></pre>
<p><span class="math inline">\(Pr(\hat{y})&lt;0\)</span> macht keinen Sinn. ‚ö°</p>
<ul>
<li>‚Ä¶ bei <code>mpg_z = +2</code>?</li>
</ul>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">m81</span>, newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>iv <span class="op">=</span> <span class="op">+</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##        1 
## 1.004872</code></pre>
<p><span class="math inline">\(Pr(\hat{y})&gt;1\)</span> macht keinen Sinn. ‚ö°</p>
<p>Schauen Sie sich mal die Vorhersage an f√ºr <code>mpg_z=5</code> ü§Ø</p>
</div>
<div id="wir-m√ºssen-die-regressionsgerade-umbiegen" class="section level3" number="8.4.2">
<h3>
<span class="header-section-number">8.4.2</span> Wir m√ºssen die Regressionsgerade umbiegen<a class="anchor" aria-label="anchor" href="#wir-m%C3%BCssen-die-regressionsgerade-umbiegen"><i class="fas fa-link"></i></a>
</h3>
<p>‚Ä¶ wenn der vorhergesagte Wert eine Wahrscheinlichkeit, <span class="math inline">\(p_i\)</span>, ist.</p>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Die <em>schwarze</em> Gerade verl√§sst den Wertebereich der Wahrscheinlichkeit.
Die <em>blaue</em> Kurve, <span class="math inline">\(\mathcal{f}\)</span>, bleibt im erlaubten Bereich, <span class="math inline">\(Pr(y) \in [0,1]\)</span>.
Wir m√ºssen also die linke oder die rechte Seite des linearen Modells transformieren:
<span class="math inline">\(p_i = f(\alpha + \beta \cdot x)\)</span> bzw.:</p>
<p><span class="math inline">\(f(p) = \alpha + \beta \cdot x\)</span></p>
<p><span class="math inline">\(\mathcal{f}\)</span> nennt man eine <em>Link-Funktion</em>.</p>
</div>
<div id="verallgemeinerte-lineare-modelle-zur-rettung" class="section level3" number="8.4.3">
<h3>
<span class="header-section-number">8.4.3</span> Verallgemeinerte lineare Modelle zur Rettung<a class="anchor" aria-label="anchor" href="#verallgemeinerte-lineare-modelle-zur-rettung"><i class="fas fa-link"></i></a>
</h3>
<p>F√ºr metrische AV mit theoretisch unendlichen Grenzen des Wertebereichs haben wir bisher eine Normalverteilung verwendet:</p>
<p><span class="math display">\[y_i \sim \mathcal{N}(\mu_i, \sigma)\]</span></p>
<p>Dann ist die Normalverteilung eine voraussetzungsarme Wahl (maximiert die Entropie).</p>
<p>Aber wenn die AV <em>bin√§r</em> ist bzw. <em>H√§ufigkeiten</em> modelliert,
braucht man eine Variable die nur positive Werte zul√§sst.</p>
<p>Diese Verallgemeinerung des linearen Modells bezeichnet man als <em>verallgemeinertes lineares Modell</em> (generalized linear model, GLM).</p>
<p>Im Falle einer bin√§ren (bzw. dichotomen) AV liegt eine bestimmte Form des GLM vor,
die man als <em>logistische Regression</em> bezeichnet.</p>
</div>
</div>
<div id="der-logit-link" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> Der Logit-Link<a class="anchor" aria-label="anchor" href="#der-logit-link"><i class="fas fa-link"></i></a>
</h2>
<p>Der <em>Logit-Link</em> wird auch <span class="math inline">\(\mathcal{L}\)</span>, <code>logit</code>, Log-Odds oder Logit-Funktion genannt.</p>
<p>Er ‚Äúbiegt‚Äù die lineare Funktion in die richtige Form.</p>
<p>Der Logit-Link ordnet einen Parameter, der als Wahrscheinlichkeitsmasse definiert ist (und daher im Bereich von 0 bis 1 liegt), einem linearen Modell zu (das jeden beliebigen reellen Wert annehmen kann):</p>
<p><span class="math display">\[
\begin{align}
    \text{logit}(p_i) &amp;= \alpha + \beta x_i
\end{align}
\]</span></p>
<ul>
<li>Die Logit-Funktion <span class="math inline">\(\mathcal{L}\)</span> ist definiert als der (nat√ºrliche) Logarithmus des Verh√§ltnisses der Wahrscheinlichkeit zu Gegenwahrscheinlichkeit:</li>
</ul>
<p><span class="math display">\[\mathcal{L} = \text{log} \frac{p_i}{1-p_i}\]</span></p>
<ul>
<li><p>Das Verh√§ltnis der Wahrscheinlichkeit zu Gegenwahrscheinlichkeit nennt man auch <em>Odds</em>.</p></li>
<li><p>Also:</p></li>
</ul>
<p><span class="math display">\[\mathcal{L} = \text{log} \frac{p_i}{1-p_i} = \alpha + \beta x_i\]</span></p>
</div>
<div id="aber-warum" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> Aber warum?<a class="anchor" aria-label="anchor" href="#aber-warum"><i class="fas fa-link"></i></a>
</h2>
<p><em>Forschungsfrage</em>: H√§ngt das √úberleben (statistisch) auf der Titanic vom Geschlecht ab?</p>
<p>Wie war eigentlich <em>insgesamt</em>, also ohne auf einen (oder mehrere) Pr√§diktoren zu bedingen, die √úberlebenswahrscheinlichkeit?</p>
<pre><code>## (Intercept) 
##   0.3838384</code></pre>
<p>Die Wahrscheinlichkeit zu √úberleben <span class="math inline">\(Pr(y=1)\)</span> lag bei einem guten Drittel (0.38).</p>
<p>Das h√§tte man auch so ausrechnen:</p>
<pre><code>##   Survived   n      prop
## 1        0 549 0.6161616
## 2        1 342 0.3838384</code></pre>
<p>Anders gesagt: <span class="math inline">\(p(y=1) = \frac{549}{549+342} \approx 0.38\)</span></p>
<div id="tidymodels-m83" class="section level3" number="8.6.1">
<h3>
<span class="header-section-number">8.6.1</span> tidymodels, m83<a class="anchor" aria-label="anchor" href="#tidymodels-m83"><i class="fas fa-link"></i></a>
</h3>
<p>Berechnen wir jetzt ein lineares Modell f√ºr die AV <code>Survived</code> mit dem Geschlecht als P√§diktor:</p>
<p>Die Faktorstufen, genannt <code>levels</code> von <code>Survived</code> sind:</p>
<pre><code>## [1] "0" "1"</code></pre>
<p>Und zwar genau in dieser Reihenfolge.</p>
</div>
</div>
<div id="lm83-glm" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> lm83, glm<a class="anchor" aria-label="anchor" href="#lm83-glm"><i class="fas fa-link"></i></a>
</h2>
<p>Die klassische Methoden in R, ein logistisches Modell zu berechnen, ist
mit der Funktion <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>.
Tidymodels greift intern auf diese Funktion zur√ºck.
Daher sind die Ergebnisse numerisch identisch.</p>
<pre><code>## (Intercept)          iv 
##  -2.6827432   0.7479317</code></pre>
<ul>
<li>AV: √úberleben (bin√§r/Faktor)</li>
<li>UV: Ticketpreis</li>
</ul>
<p>Mit <a href="https://github.com/easystats/easystats">easystats</a> kann man sich <code>model_parameter()</code> einfach ausgeben lassen:</p>
<pre><code>## Parameter   | Log-Odds |   SE |         95% CI |      z |      p
## ----------------------------------------------------------------
## (Intercept) |    -2.68 | 0.26 | [-3.19, -2.19] | -10.46 | &lt; .001
## iv          |     0.75 | 0.08 | [ 0.59,  0.91] |   9.13 | &lt; .001</code></pre>
<p>Und auch visualisieren lassen:</p>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;"></div>
</div>
<div id="m83-tidymodels" class="section level2" number="8.8">
<h2>
<span class="header-section-number">8.8</span> m83, tidymodels<a class="anchor" aria-label="anchor" href="#m83-tidymodels"><i class="fas fa-link"></i></a>
</h2>
<p><em>Achtung</em>! Bei tidymodels muss bei einer Klassifikation die AV vom Type <code>factor</code> sein.
Au√üerdem wird bei <code>tidymodels</code>, im Gegensatz zu <code>(g)lm</code> nicht die zweite,
sondern die <em>erste</em> als Ereignis modelliert wird.</p>
<p>`</p>
<p>Daher wechseln wir die <em>ref</em>erenzkategorie, wir ‚Äúre-leveln‚Äù, mit <code><a href="https://rdrr.io/r/stats/relevel.html">relevel()</a></code>:</p>
<p>Check:</p>
<pre><code>## [1] "1" "0"</code></pre>
<p>Passt.</p>
<p>Die erste Stufe ist jetzt <code>1</code>, also √úberleben.</p>
<p>Jetzt berechnen wir das Modell in gewohnter Weise mit <code>tidymodels</code>.</p>
<p>Hier sind die Koeffizienten, die kann man sich aus <code>m83_fit</code> herausziehen:</p>
<div id="whjtxzvoko" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#whjtxzvoko .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#whjtxzvoko .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whjtxzvoko .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#whjtxzvoko .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#whjtxzvoko .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whjtxzvoko .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whjtxzvoko .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#whjtxzvoko .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#whjtxzvoko .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#whjtxzvoko .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#whjtxzvoko .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#whjtxzvoko .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#whjtxzvoko .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#whjtxzvoko .gt_from_md > :first-child {
  margin-top: 0;
}

#whjtxzvoko .gt_from_md > :last-child {
  margin-bottom: 0;
}

#whjtxzvoko .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#whjtxzvoko .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#whjtxzvoko .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whjtxzvoko .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#whjtxzvoko .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whjtxzvoko .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#whjtxzvoko .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#whjtxzvoko .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whjtxzvoko .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whjtxzvoko .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#whjtxzvoko .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whjtxzvoko .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#whjtxzvoko .gt_left {
  text-align: left;
}

#whjtxzvoko .gt_center {
  text-align: center;
}

#whjtxzvoko .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#whjtxzvoko .gt_font_normal {
  font-weight: normal;
}

#whjtxzvoko .gt_font_bold {
  font-weight: bold;
}

#whjtxzvoko .gt_font_italic {
  font-style: italic;
}

#whjtxzvoko .gt_super {
  font-size: 65%;
}

#whjtxzvoko .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">p.value</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">(Intercept)</td>
<td class="gt_row gt_right">2.68</td>
<td class="gt_row gt_right">0.26</td>
<td class="gt_row gt_right">10.46</td>
<td class="gt_row gt_right">0.00</td>
</tr>
<tr>
<td class="gt_row gt_left">iv</td>
<td class="gt_row gt_right">‚àí0.75</td>
<td class="gt_row gt_right">0.08</td>
<td class="gt_row gt_right">‚àí9.13</td>
<td class="gt_row gt_right">0.00</td>
</tr>
</tbody>
</table></div>
</div>
<pre><code>## [1]  2.6827432 -0.7479317</code></pre>
<pre><code>## # A tibble: 2 √ó 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)    2.68     0.256      10.5  1.26e-25
## 2 iv            -0.748    0.0819     -9.13 6.87e-20</code></pre>
<p>Die Koeffizienten werden in Logits angegeben.</p>
<p>In Abb. <a href="logistische-regression.html#fig:m83-plot">8.2</a> ist das Modell und die Daten visualisiert.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:m83-plot"></span>
<img src="090-logistische-Regression_files/figure-html/m83-plot-1.png" alt="m83 und die Titanic-Daten" width="70%"><p class="caption">
Figure 8.2: m83 und die Titanic-Daten
</p>
</div>
<p>Definieren wir als <span class="math inline">\(y=1\)</span> das zu modellierende Ereignis, hier ‚Äú√úberleben auf der Titanic‚Äù (hat also √ºberlebt).</p>
<p>Wie wir oben schon gesehen haben, funktioniert die lineare Regression nicht einwandfrei bei bin√§ren (oder dichotomen) AV.</p>
<div id="wahrscheinlichkeit-in-odds" class="section level3" number="8.8.1">
<h3>
<span class="header-section-number">8.8.1</span> Wahrscheinlichkeit in Odds<a class="anchor" aria-label="anchor" href="#wahrscheinlichkeit-in-odds"><i class="fas fa-link"></i></a>
</h3>
<p>Probieren wir Folgendes: Rechnen wir die Wahrscheinlichkeit zu √úberlegen f√ºr <span class="math inline">\(y\)</span>, kurz <span class="math inline">\(p\)</span>, in <em>Odds</em> (Chancen) um.</p>
<p><span class="math inline">\(odds = \frac{p}{1-p}\)</span></p>
<p>In R:</p>
<pre><code>## [1] 0.6129032</code></pre>
<p>Bildlich gesprochen sagen die Odds: f√ºr 38 Menschen, die √ºberlebt haben, kommen (ca.) 62 Menschen, die nicht √ºberlebt haben, s. Abb. <a href="logistische-regression.html#fig:odds1">8.3</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:odds1"></span>
<img src="090-logistische-Regression_files/figure-html/odds1-1.png" alt="Odds: 38 zu 62" width="70%"><p class="caption">
Figure 8.3: Odds: 38 zu 62
</p>
</div>
<p>Plotten wir die Odds als Funktion der UV, s. Abb. <a href="logistische-regression.html#fig:odds2">8.4</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:odds2"></span>
<img src="090-logistische-Regression_files/figure-html/odds2-1.png" alt="Odds als Funktion der UV" width="70%"><p class="caption">
Figure 8.4: Odds als Funktion der UV
</p>
</div>
<p>Wir sind noch nicht am Ziel;
die Variable ist noch nicht ‚Äúrichtig gebogen‚Äù.</p>
</div>
<div id="von-odds-zu-log-odds" class="section level3" number="8.8.2">
<h3>
<span class="header-section-number">8.8.2</span> Von Odds zu Log-Odds<a class="anchor" aria-label="anchor" href="#von-odds-zu-log-odds"><i class="fas fa-link"></i></a>
</h3>
<p>Wenn wir jetzt den Logarithmus berechnen der Log-Odds bekommen wir eine ‚Äúbrav gebogenen‚Äù Funktion, die Log-Odds, <span class="math inline">\(\mathcal{L}\)</span>, als Funktion der UV, s. Abb. <a href="logistische-regression.html#fig:logit2">8.5</a>.</p>
<p><span class="math display">\[\mathcal{L} = log (odds) = log \left(\frac{p}{1-p}\right)\]</span></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:logit2"></span>
<img src="090-logistische-Regression_files/figure-html/logit2-1.png" alt="Logit als Funktion der UV" width="70%"><p class="caption">
Figure 8.5: Logit als Funktion der UV
</p>
</div>
<p>Linear!</p>
<p>Es gilt also:</p>
<p><span class="math display">\[\text {log-odds} = b_0 + b_1x\]</span></p>
<p>Log-Odds (Log-Odds) bezeichnet man auch als <em>Logits</em>.</p>
</div>
</div>
<div id="inverser-logit" class="section level2" number="8.9">
<h2>
<span class="header-section-number">8.9</span> Inverser Logit<a class="anchor" aria-label="anchor" href="#inverser-logit"><i class="fas fa-link"></i></a>
</h2>
<p>Um nach <span class="math inline">\(p\)</span> aufzul√∂sen, m√ºssen wir einige Algebra bem√ºhen:</p>
<p><span class="math display">\[
\begin{align}
\text{log} \frac{p}{1-p} &amp;= \alpha + \beta x &amp; &amp; \text{Exponentieren}\\
\frac{p}{1-p} &amp;= e^{\alpha + \beta x} \\
p_i &amp;= e^{\alpha + \beta x_i} (1-p) &amp; &amp; \text{Zur Vereinfachung: } x := e^{\alpha + \beta x_i} \\
p_i &amp;= x (1-p) \\
&amp;= x - xp \\
p + px &amp;= x \\
p(1+x) &amp;= x \\
p &amp;= \frac{x} {1+x} &amp; &amp; \text{L√∂sen wir x wieder auf.} \\
p &amp;= \frac{e^{\alpha + \beta x_i}}{1 + e^{\alpha + \beta x_i}} = \mathcal{L}^{-1}
\end{align}
\]</span></p>
<p>Diese Funktion nennt man auch <em>inverser Logit</em>, <span class="math inline">\(\text{logit}^{-1}, \mathcal{L}^{-1}\)</span>.</p>
<p>Zum Gl√ºck macht das alles die Rechenmaschine f√ºr uns üòÑ.</p>
</div>
<div id="vom-logit-zur-klasse" class="section level2" number="8.10">
<h2>
<span class="header-section-number">8.10</span> Vom Logit zur Klasse<a class="anchor" aria-label="anchor" href="#vom-logit-zur-klasse"><i class="fas fa-link"></i></a>
</h2>
<p>Praktisch k√∂nnen wir uns die Logits und ihre zugeh√∂rige Wahrscheinlichkeit einfach ausgeben lassen mit R. Und die vorhergesagte Klasse (<code>.pred_class</code>) auch:</p>
<pre><code>##                                                  Name     logits
## 1                             Braund, Mr. Owen Harris  1.2010894
## 2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) -0.5084287
## 3                              Heikkinen, Miss. Laina  1.1345079</code></pre>
<div id="grenzwert-wechseln" class="section level3" number="8.10.1">
<h3>
<span class="header-section-number">8.10.1</span> Grenzwert wechseln<a class="anchor" aria-label="anchor" href="#grenzwert-wechseln"><i class="fas fa-link"></i></a>
</h3>
<p>Im Standard wird 50% als Grenzwert f√ºr die vorhergesagte Klasse <span class="math inline">\(c\)</span> genommen:</p>
<ul>
<li>wenn <span class="math inline">\(p &lt;= .5 \rightarrow c = 0\)</span>
</li>
<li>wenn <span class="math inline">\(p &gt; .5 \rightarrow c = 1\)</span>
</li>
</ul>
<p>Man kann aber den Grenzwert beliebig w√§hlen, um Kosten-Nutzen-Abw√§gungen zu optimieren;
mehr dazu findet sich z.B. <a href="https://probably.tidymodels.org/articles/where-to-use.html">hier</a>.</p>
</div>
</div>
<div id="logit-und-inverser-logit" class="section level2" number="8.11">
<h2>
<span class="header-section-number">8.11</span> Logit und Inverser Logit<a class="anchor" aria-label="anchor" href="#logit-und-inverser-logit"><i class="fas fa-link"></i></a>
</h2>
<div id="logit" class="section level3" number="8.11.1">
<h3>
<span class="header-section-number">8.11.1</span> Logit<a class="anchor" aria-label="anchor" href="#logit"><i class="fas fa-link"></i></a>
</h3>
<p><span class="math inline">\((0,1) \rightarrow (-\infty, +\infty)\)</span></p>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/unnamed-chunk-18-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Praktisch, um Wahrscheinlichkeit zu modellieren.</p>
<p><span class="math display">\[p \rightarrow \fbox{logit} \rightarrow \alpha + \beta x\]</span></p>
</div>
<div id="inv-logit" class="section level3" number="8.11.2">
<h3>
<span class="header-section-number">8.11.2</span> Inv-Logit<a class="anchor" aria-label="anchor" href="#inv-logit"><i class="fas fa-link"></i></a>
</h3>
<p><span class="math inline">\((-\infty, +\infty) \rightarrow (0,1)\)</span></p>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/inv-logit-plot-1.png" width="70%" style="display: block; margin: auto;"></div>
<p>Praktisch, um in Wahrscheinlichkeiten umzurechnen.</p>
<p><span class="math display">\[p \leftarrow \fbox{inv-logit} \leftarrow \alpha + \beta x\]</span></p>
</div>
</div>
<div id="logistische-regression-im-√ºberblick" class="section level2" number="8.12">
<h2>
<span class="header-section-number">8.12</span> Logistische Regression im √úberblick<a class="anchor" aria-label="anchor" href="#logistische-regression-im-%C3%BCberblick"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>Eine Regression mit binomial verteilter AV und Logit-Link nennt man <em>logistische Regression</em>.</p></li>
<li>
<p>Man verwendet die logistische Regression um binomial verteilte AV zu modellieren, z.B.</p>
<ul>
<li>Wie hoch ist die Wahrscheinlichkeit, dass ein Kunde das Produkt kauft?</li>
<li>Wie hoch ist die Wahrscheinlichkeit, dass ein Mitarbeiter k√ºndigt?</li>
<li>Wie hoch ist die Wahrscheinlichkeit, die Klausur zu bestehen?</li>
</ul>
</li>
<li><p>Die logistische Regression ist eine normale, lineare Regression f√ºr den Logit von <span class="math inline">\(Pr(y=1)\)</span>, wobei <span class="math inline">\(y\)</span> (AV) binomialvereteilt mit <span class="math inline">\(n=1\)</span> angenommen wird:</p></li>
</ul>
<p><span class="math display">\[
\begin{align}
y_i &amp;\sim \mathcal{B}(1, p_i) \\
\text{logit}(p_i) &amp;= \alpha + \beta x_i
\end{align}
\]</span></p>
<ul>
<li><p>Da es sich um eine normale, lineare Regression handelt, sind alle bekannten Methoden und Techniken der linearen Regression zul√§ssig.</p></li>
<li><p>Da Logits nicht einfach zu interpretieren sind, rechnet man nach der Berechnung des Modells den Logit h√§ufig in Wahrscheinlichkeiten um.</p></li>
</ul>
<div id="die-koeffizienten-sind-schwer-zu-interpretieren" class="section level3" number="8.12.1">
<h3>
<span class="header-section-number">8.12.1</span> Die Koeffizienten sind schwer zu interpretieren<a class="anchor" aria-label="anchor" href="#die-koeffizienten-sind-schwer-zu-interpretieren"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="090-logistische-Regression_files/figure-html/logit-convert-plot-1.png" width="70%" style="display: block; margin: auto;"></div>
<ul>
<li>In der logistischen Regression gilt <em>nicht</em> mehr, dass eine konstante Ver√§nderung in der UV mit einer konstanten Ver√§nderung in der AV einhergeht.</li>
<li>Stattdessen geht eine konstante Ver√§nderung in der UV mit einer konstanten Ver√§nderung im <em>Logit</em> der AV einher.</li>
<li>Beim logistischen Modell hier gilt, dass in der N√§he von <span class="math inline">\(x=0\)</span> die gr√∂√üte Ver√§nderung in <span class="math inline">\(p\)</span> von statten geht; je weiter weg von <span class="math inline">\(x=0\)</span>, desto geringer ist die Ver√§nderung in <span class="math inline">\(p\)</span>.</li>
</ul>
</div>
<div id="logits-vs.-wahrscheinlichkeiten" class="section level3" number="8.12.2">
<h3>
<span class="header-section-number">8.12.2</span> Logits vs.¬†Wahrscheinlichkeiten<a class="anchor" aria-label="anchor" href="#logits-vs.-wahrscheinlichkeiten"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">konvert_logits</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    logit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="op">-</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">3</span>, 
              <span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">.25</span>, 
              <span class="fl">0</span>, 
              <span class="fl">.25</span>, <span class="fl">.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, 
              <span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span>,
    p <span class="op">=</span> <span class="fu">rstanarm</span><span class="fu">::</span><span class="fu"><a href="https://mc-stan.org/rstanarm/reference/logit.html">invlogit</a></span><span class="op">(</span><span class="va">logit</span><span class="op">)</span>
  <span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">gt</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">fmt_number</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<!-- ## Aufgaben und Vertiefung -->
</div>
</div>
<div id="aufgaben-5" class="section level2" number="8.13">
<h2>
<span class="header-section-number">8.13</span> Aufgaben<a class="anchor" aria-label="anchor" href="#aufgaben-5"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="https://juliasilge.com/blog/tuition-resampling/">Fallstudien zu Studiengeb√ºhren</a></li>
<li><a href="https://www.tidymodels.org/start/case-study/">1. Modell der Fallstudie Hotel Bookings</a></li>
<li><a href="https://github.com/sebastiansauer/datascience1/blob/main/Aufgaben/Thema8-Loesungen1.pdf">Aufgaben zur logistischen Regression, PDF</a></li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="resampling-und-tuning.html"><span class="header-section-number">7</span> Resampling und Tuning</a></div>
<div class="next"><a href="entscheidungsb%C3%A4ume.html"><span class="header-section-number">9</span> Entscheidungsb√§ume</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#logistische-regression"><span class="header-section-number">8</span> Logistische Regression</a></li>
<li>
<a class="nav-link" href="#lernsteuerung-5"><span class="header-section-number">8.1</span> Lernsteuerung</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#vorbereitung-5"><span class="header-section-number">8.1.1</span> Vorbereitung</a></li>
<li><a class="nav-link" href="#lernziele-6"><span class="header-section-number">8.1.2</span> Lernziele</a></li>
<li><a class="nav-link" href="#literatur-6"><span class="header-section-number">8.1.3</span> Literatur</a></li>
</ul>
</li>
<li><a class="nav-link" href="#intuitive-erkl%C3%A4rung-1"><span class="header-section-number">8.2</span> Intuitive Erkl√§rung</a></li>
<li><a class="nav-link" href="#profil"><span class="header-section-number">8.3</span> Profil</a></li>
<li>
<a class="nav-link" href="#warum-nicht-die-lineare-regression-verwenden"><span class="header-section-number">8.4</span> Warum nicht die lineare Regression verwenden?</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#lineare-modelle-running-wild"><span class="header-section-number">8.4.1</span> Lineare Modelle running wild</a></li>
<li><a class="nav-link" href="#wir-m%C3%BCssen-die-regressionsgerade-umbiegen"><span class="header-section-number">8.4.2</span> Wir m√ºssen die Regressionsgerade umbiegen</a></li>
<li><a class="nav-link" href="#verallgemeinerte-lineare-modelle-zur-rettung"><span class="header-section-number">8.4.3</span> Verallgemeinerte lineare Modelle zur Rettung</a></li>
</ul>
</li>
<li><a class="nav-link" href="#der-logit-link"><span class="header-section-number">8.5</span> Der Logit-Link</a></li>
<li>
<a class="nav-link" href="#aber-warum"><span class="header-section-number">8.6</span> Aber warum?</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#tidymodels-m83"><span class="header-section-number">8.6.1</span> tidymodels, m83</a></li></ul>
</li>
<li><a class="nav-link" href="#lm83-glm"><span class="header-section-number">8.7</span> lm83, glm</a></li>
<li>
<a class="nav-link" href="#m83-tidymodels"><span class="header-section-number">8.8</span> m83, tidymodels</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#wahrscheinlichkeit-in-odds"><span class="header-section-number">8.8.1</span> Wahrscheinlichkeit in Odds</a></li>
<li><a class="nav-link" href="#von-odds-zu-log-odds"><span class="header-section-number">8.8.2</span> Von Odds zu Log-Odds</a></li>
</ul>
</li>
<li><a class="nav-link" href="#inverser-logit"><span class="header-section-number">8.9</span> Inverser Logit</a></li>
<li>
<a class="nav-link" href="#vom-logit-zur-klasse"><span class="header-section-number">8.10</span> Vom Logit zur Klasse</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#grenzwert-wechseln"><span class="header-section-number">8.10.1</span> Grenzwert wechseln</a></li></ul>
</li>
<li>
<a class="nav-link" href="#logit-und-inverser-logit"><span class="header-section-number">8.11</span> Logit und Inverser Logit</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#logit"><span class="header-section-number">8.11.1</span> Logit</a></li>
<li><a class="nav-link" href="#inv-logit"><span class="header-section-number">8.11.2</span> Inv-Logit</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#logistische-regression-im-%C3%BCberblick"><span class="header-section-number">8.12</span> Logistische Regression im √úberblick</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#die-koeffizienten-sind-schwer-zu-interpretieren"><span class="header-section-number">8.12.1</span> Die Koeffizienten sind schwer zu interpretieren</a></li>
<li><a class="nav-link" href="#logits-vs.-wahrscheinlichkeiten"><span class="header-section-number">8.12.2</span> Logits vs.¬†Wahrscheinlichkeiten</a></li>
</ul>
</li>
<li><a class="nav-link" href="#aufgaben-5"><span class="header-section-number">8.13</span> Aufgaben</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/sebastiansauer/datascience1/blob/master/090-logistische-Regression.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/sebastiansauer/datascience1/edit/master/090-logistische-Regression.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DataScience1</strong>: Grundlagen der Prognosemodellierung üîÆüß∞" was written by Sebastian Sauer. It was last built on 2022-06-03 16:34:56.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
