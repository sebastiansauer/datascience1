<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kapitel 4 R, zweiter Blick | DataScience1</title>
<meta name="author" content="Sebastian Sauer">
<meta name="description" content="4.1 Lernsteuerung   4.1.1 Vorbereitung Lesen Sie die Literatur.  4.1.2 Lernziele Sie k√∂nnen Funktionen, in R schreiben. Sie k√∂nnen Datens√§tze vom Lang- und Breit-Format wechseln. Sie k√∂nnen...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Kapitel 4 R, zweiter Blick | DataScience1">
<meta property="og:type" content="book">
<meta property="og:description" content="4.1 Lernsteuerung   4.1.1 Vorbereitung Lesen Sie die Literatur.  4.1.2 Lernziele Sie k√∂nnen Funktionen, in R schreiben. Sie k√∂nnen Datens√§tze vom Lang- und Breit-Format wechseln. Sie k√∂nnen...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kapitel 4 R, zweiter Blick | DataScience1">
<meta name="twitter:description" content="4.1 Lernsteuerung   4.1.1 Vorbereitung Lesen Sie die Literatur.  4.1.2 Lernziele Sie k√∂nnen Funktionen, in R schreiben. Sie k√∂nnen Datens√§tze vom Lang- und Breit-Format wechseln. Sie k√∂nnen...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/es6shim-0.35.6/es6shim.js"></script><script src="libs/es7shim-6.0.0/es7shim.js"></script><script src="libs/graphre-0.1.3/graphre.js"></script><script src="libs/nomnoml-1.4.0/nomnoml.js"></script><script src="libs/nomnoml-binding-0.2.5/nomnoml.js"></script><script src="libs/d3-3.3.8/d3.min.js"></script><script src="libs/dagre-0.4.0/dagre-d3.min.js"></script><link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><script src="libs/chromatography-0.1/chromatography.js"></script><script src="libs/DiagrammeR-binding-1.0.9/DiagrammeR.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style-bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Grundlagen der Prognosemodellierung üîÆüß∞">DataScience1</a>:
        <small class="text-muted">Grundlagen der Prognosemodellierung üîÆüß∞</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Zu diesem Buch</a></li>
<li><a class="" href="hinweise.html"><span class="header-section-number">1</span> Hinweise</a></li>
<li><a class="" href="pr%C3%BCfung.html"><span class="header-section-number">2</span> Pr√ºfung</a></li>
<li class="book-part">Themen</li>
<li><a class="" href="statistisches-lernen.html"><span class="header-section-number">3</span> Statistisches Lernen</a></li>
<li><a class="active" href="r-zweiter-blick.html"><span class="header-section-number">4</span> R, zweiter Blick</a></li>
<li><a class="" href="tidymodels.html"><span class="header-section-number">5</span> tidymodels</a></li>
<li><a class="" href="knn.html"><span class="header-section-number">6</span> kNN</a></li>
<li><a class="" href="resampling-und-tuning.html"><span class="header-section-number">7</span> Resampling und Tuning</a></li>
<li><a class="" href="logistische-regression.html"><span class="header-section-number">8</span> Logistische Regression</a></li>
<li><a class="" href="entscheidungsb%C3%A4ume.html"><span class="header-section-number">9</span> Entscheidungsb√§ume</a></li>
<li><a class="" href="ensemble-lerner.html"><span class="header-section-number">10</span> Ensemble Lerner</a></li>
<li><a class="" href="regularisierte-modelle.html"><span class="header-section-number">11</span> Regularisierte Modelle</a></li>
<li><a class="" href="kaggle.html"><span class="header-section-number">12</span> Kaggle</a></li>
<li><a class="" href="der-rote-faden.html"><span class="header-section-number">13</span> Der rote Faden</a></li>
<li><a class="" href="fallstudien.html"><span class="header-section-number">14</span> Fallstudien</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/sebastiansauer/datascience1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-zweiter-blick" class="section level1" number="4">
<h1>
<span class="header-section-number">Kapitel 4</span> R, zweiter Blick<a class="anchor" aria-label="anchor" href="#r-zweiter-blick"><i class="fas fa-link"></i></a>
</h1>
<div id="lernsteuerung-1" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Lernsteuerung<a class="anchor" aria-label="anchor" href="#lernsteuerung-1"><i class="fas fa-link"></i></a>
</h2>
<!-- Chapter Start sections: Lernziele, Literatur, Hinweise, ... -->
<div id="vorbereitung-2" class="section level3" number="4.1.1">
<h3>
<span class="header-section-number">4.1.1</span> Vorbereitung<a class="anchor" aria-label="anchor" href="#vorbereitung-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Lesen Sie die Literatur.</li>
</ul>
</div>
<div id="lernziele-2" class="section level3" number="4.1.2">
<h3>
<span class="header-section-number">4.1.2</span> Lernziele<a class="anchor" aria-label="anchor" href="#lernziele-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Sie k√∂nnen Funktionen, in R schreiben.</li>
<li>Sie k√∂nnen Datens√§tze vom Lang- und Breit-Format wechseln.</li>
<li>Sie k√∂nnen Wiederholungsstrukturen wie Mapping-Funktionen anwenden.</li>
<li>Sie k√∂nnen eine dplyr-Funktion auf mehrere Spalten gleichzeitig anwenden.</li>
</ul>
</div>
<div id="literatur-2" class="section level3" number="4.1.3">
<h3>
<span class="header-section-number">4.1.3</span> Literatur<a class="anchor" aria-label="anchor" href="#literatur-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Rhys, Kap. 2</li>
<li>MODAR, Kap. 5</li>
</ul>
</div>
</div>
<div id="objekttypen-in-r" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Objekttypen in R<a class="anchor" aria-label="anchor" href="#objekttypen-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>N√§heres zu Objekttypen findet sich in <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>, Kap. 5.2.</p>
<div id="√ºberblick" class="section level3" number="4.2.1">
<h3>
<span class="header-section-number">4.2.1</span> √úberblick<a class="anchor" aria-label="anchor" href="#%C3%BCberblick"><i class="fas fa-link"></i></a>
</h3>
<p>In R ist praktisch alles ein Objekt.
Ein Objekt meint ein im Computerspeicher repr√§sentiertes Ding, etwa eine Tabelle.</p>
<p>Vektoren und Dataframes (Tibbles) sind die vielleicht g√§ngigsten Objektarten in R (vgl. Abb. <a href="r-zweiter-blick.html#fig:obs">4.1</a>, aus <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:obs"></span>
<img src="img/zentrale_objektarten.png" alt="Zentrale Objektarten in R" width="70%"><p class="caption">
Figure 4.1: Zentrale Objektarten in R
</p>
</div>
<p>Es gibt in R keine (Objekte f√ºr) Skalare (einzelne Zahlen).
Stattdessen nutzt R Vektoren der L√§nge 1.</p>
<p>Ein n√ºtzliches Schema stammt aus <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span>, s. Abb. <a href="r-zweiter-blick.html#fig:objtypes">4.2</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:objtypes"></span>
<img src="https://d33wubrfki0l68.cloudfront.net/1d1b4e1cf0dc5f6e80f621b0225354b0addb9578/6ee1c/diagrams/data-structures-overview.png" alt="Objektarten hierarchisch gegliedert" width="70%"><p class="caption">
Figure 4.2: Objektarten hierarchisch gegliedert
</p>
</div>
</div>
<div id="taxonomie-1" class="section level3" number="4.2.2">
<h3>
<span class="header-section-number">4.2.2</span> Taxonomie<a class="anchor" aria-label="anchor" href="#taxonomie-1"><i class="fas fa-link"></i></a>
</h3>
<p>Unter <em>homogenen</em> Objektiven verstehen wir Datenstrukturen,
die nur eine Art von Daten (wie Text oder Ganze Zahlen) fassen.
Sonstige Objekte nennen wir <em>heterogen</em>.</p>
<ul>
<li>Homogene Objekte
<ul>
<li>Vektoren</li>
<li>Matrizen</li>
</ul>
</li>
<li>Heterogen
<ul>
<li>Liste</li>
<li>Dataframes (Tibbles)</li>
</ul>
</li>
</ul>
<div id="vektoren" class="section level4" number="4.2.2.1">
<h4>
<span class="header-section-number">4.2.2.1</span> Vektoren<a class="anchor" aria-label="anchor" href="#vektoren"><i class="fas fa-link"></i></a>
</h4>
<p><em>Vektoren</em> sind insofern zentral in R,
als dass die √ºbrigen Datenstrukturen auf ihnen aufbauen, vgl. Abb. <a href="r-zweiter-blick.html#fig:vektorenimzentrum">4.3</a> aus <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
<p>Reine (atomare) Vektoren in R sind eine geordnete Liste von Daten eines Typs.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:vektorenimzentrum"></span>
<img src="img/Datenstrukturen.png" alt="Vektoren stehen im Zentrum der Datenstrukturen in R" width="70%"><p class="caption">
Figure 4.3: Vektoren stehen im Zentrum der Datenstrukturen in R
</p>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ein_vektor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">noch_ein_vektor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>
<span class="va">logischer_vektor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Mit <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> kann man sich die <code>Str</code>uktur eines Objektsausgeben lassen:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ein_vektor</span><span class="op">)</span></code></pre></div>
<pre><code>##  num [1:3] 1 2 3</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">noch_ein_vektor</span><span class="op">)</span></code></pre></div>
<pre><code>##  chr [1:3] "A" "B" "C"</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">logischer_vektor</span><span class="op">)</span></code></pre></div>
<pre><code>##  logi [1:3] TRUE FALSE TRUE</code></pre>
<p>Vektoren k√∂nnen von folgenden Typen sein:</p>
<ul>
<li>Kommazahlen ( <code>double</code>) genannt</li>
<li>Ganzzahlig (<code>integer</code>, auch mit <code>L</code> f√ºr <em>Long</em> abgek√ºrzt)</li>
<li>Text (¬¥character`, String)</li>
<li>logische Ausdr√ºcke (<code>logical</code> oder <code>lgl</code>) mit <code>TRUE</code> oder <code>FALSE</code>
</li>
</ul>
<p>Kommazahlen und Ganze Zahlen zusammen bilden den Typ <code>numeric</code> (numerisch) in R.</p>
<p>Den Typ eines Vektors kann man mit <code><a href="https://rdrr.io/r/base/typeof.html">typeof()</a></code> ausgeben lassen:</p>
<pre><code>## [1] "double"</code></pre>
</div>
<div id="faktoren" class="section level4" number="4.2.2.2">
<h4>
<span class="header-section-number">4.2.2.2</span> Faktoren<a class="anchor" aria-label="anchor" href="#faktoren"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mann"</span>, <span class="st">"Frau"</span>, <span class="st">"Frau"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Interessant:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels "Frau","Mann": 2 1 1</code></pre>
<p>Vertiefende Informationen findet sich in <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span>.</p>
</div>
<div id="listen" class="section level4" number="4.2.2.3">
<h4>
<span class="header-section-number">4.2.2.3</span> Listen<a class="anchor" aria-label="anchor" href="#listen"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>titel <span class="op">=</span> <span class="st">"Einf√ºhrung"</span>,
                   woche <span class="op">=</span> <span class="fl">1</span>,
                   datum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2022-03-14"</span>, <span class="st">"2202-03-21"</span><span class="op">)</span>,
                   lernziele <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dies"</span>, <span class="st">"jenes"</span>, <span class="st">"und noch mehr"</span><span class="op">)</span>,
                   lehre <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span>
                   <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">eine_liste</span><span class="op">)</span></code></pre></div>
<pre><code>## List of 5
##  $ titel    : chr "Einf√ºhrung"
##  $ woche    : num 1
##  $ datum    : chr [1:2] "2022-03-14" "2202-03-21"
##  $ lernziele: chr [1:3] "dies" "jenes" "und noch mehr"
##  $ lehre    : logi [1:3] TRUE TRUE TRUE</code></pre>
</div>
<div id="tibbles" class="section level4" number="4.2.2.4">
<h4>
<span class="header-section-number">4.2.2.4</span> Tibbles<a class="anchor" aria-label="anchor" href="#tibbles"><i class="fas fa-link"></i></a>
</h4>
<p>F√ºr <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> brauchen wir <code>tidyverse</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">studentis</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Anna"</span>, <span class="st">"Berta"</span><span class="op">)</span>,
    motivation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,
    noten <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.3</span>, <span class="fl">1.7</span><span class="op">)</span>
  <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">studentis</span><span class="op">)</span></code></pre></div>
<pre><code>## tibble [2 √ó 3] (S3: tbl_df/tbl/data.frame)
##  $ name      : chr [1:2] "Anna" "Berta"
##  $ motivation: num [1:2] 10 20
##  $ noten     : num [1:2] 1.3 1.7</code></pre>
</div>
</div>
<div id="indizieren" class="section level3" number="4.2.3">
<h3>
<span class="header-section-number">4.2.3</span> Indizieren<a class="anchor" aria-label="anchor" href="#indizieren"><i class="fas fa-link"></i></a>
</h3>
<p>Einen Teil eines Objekts auszulesen, bezeichnen wir als <em>Indizieren</em>.</p>
<div id="reine-vektoren" class="section level4" number="4.2.3.1">
<h4>
<span class="header-section-number">4.2.3.1</span> Reine Vektoren<a class="anchor" aria-label="anchor" href="#reine-vektoren"><i class="fas fa-link"></i></a>
</h4>
<p>Zur Erinnerung:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ein_vektor</span><span class="op">)</span></code></pre></div>
<pre><code>##  num [1:3] 1 2 3</code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ein_vektor</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ein_vektor</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<p>Aber <em>nicht</em> so:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ein_vektor</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## Error in ein_vektor[1, 2]: incorrect number of dimensions</code></pre>
<p>Man darf Vektoren auch wie Listen ansprechen, also eine doppelte Eckklammer zum Indizieren verwenden</p>
<pre><code>## [1] 2</code></pre>
<p>Der Grund ist,
dass Listen auch Vektoren sind, nur eben ein besonderer Fall eines Vektors:</p>
<pre><code>## [1] TRUE</code></pre>
<p>Was passiert, wenn man bei einem Vektor der L√§nge 3 das 4. Element indiziert?</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ein_vektor</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Ein schn√∂des <code>NA</code> ist die Antwort. Das ist interessant:
Wir bekommen keine Fehlermeldung, sondern den Hinweis,
das angesprochene Element sei leer bzw. nicht verf√ºgbar.</p>
<p>In <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>, Kap. 5.3.1 findet man weitere Indizierungsm√∂glichkeiten f√ºr reine Vektoren.</p>
</div>
<div id="listen-1" class="section level4" number="4.2.3.2">
<h4>
<span class="header-section-number">4.2.3.2</span> Listen<a class="anchor" aria-label="anchor" href="#listen-1"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## List of 5
##  $ titel    : chr "Einf√ºhrung"
##  $ woche    : num 1
##  $ datum    : chr [1:2] "2022-03-14" "2202-03-21"
##  $ lernziele: chr [1:3] "dies" "jenes" "und noch mehr"
##  $ lehre    : logi [1:3] TRUE TRUE TRUE</code></pre>
<p>Listen k√∂nnen wie Vektoren, also mit <code>[</code> ausgelesen werden.
Dann wird eine Liste zur√ºckgegeben.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## $titel
## [1] "Einf√ºhrung"</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## $woche
## [1] 1</code></pre>
<p>Das hat den technischen Hintergrund,
dass Listen als eine bestimmte Art von Vektoren implementiert sind.</p>
<p>Mann kann auch die ‚Äúdoppelte Eckklammer‚Äù, <code>[[</code> zum Auslesen verwenden;
dann wird anstelle einer Liste die einfachere Struktur eines Vektors zur√ºckgegeben:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Einf√ºhrung"</code></pre>
<p>Man k√∂nnte sagen,
die ‚Äú√§u√üere Schicht‚Äù des Objekts, die Liste,
wird abgesch√§lt, und man bekommnt die ‚Äúinnere‚Äù Schicht,
den Vektor.</p>
<p>Mann die Elemente der Liste entweder mit ihrer Positionsnummer (1, 2, ‚Ä¶) oder,
sofern vorhanden, ihren Namen ansprechen:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[[</span><span class="st">"titel"</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Einf√ºhrung"</code></pre>
<p>Dann gibt es noch den Dollar-Operator,
mit dem Mann benannte Elemente von Listen ansprechen kann:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">$</span><span class="va">titel</span></code></pre></div>
<pre><code>## [1] "Einf√ºhrung"</code></pre>
<p>Man kann auch tiefer in eine Liste hinein indizieren.
Sagen wir, uns interessiert das 4. Element der Liste <code>eine_liste</code> -
und davon das erste Element.</p>
<p>Das geht dann so:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> </code></pre></div>
<pre><code>## [1] "dies"</code></pre>
<p>Eine einfachere Art des Indizierens von Listen bietet die Funktion <code><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck()</a></code>, aus dem Paket <code>purrr</code>,
das Hilfen f√ºr den Umgang mit Listen bietet.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="va">eine_liste</span>, <span class="fl">4</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "dies"          "jenes"         "und noch mehr"</code></pre>
<p>Und jetzt aus dem 4. Element das 1. Element:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="va">eine_liste</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "dies"</code></pre>
<p>Probieren Sie mal, aus einer Liste der L√§nge 5 das 6. Element auszulesen:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## Error in eine_liste[[6]]: subscript out of bounds</code></pre>
<p>Unser Versuch wird mit einer Fehlermeldung quittiert.</p>
<p>Sprechen wir die Liste wie einen (atomaren) Vektor an,
bekommen wir hingegen ein <code>NA</code> bzw. ein <code>NULL</code>:</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eine_liste</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span></code></pre></div>
<pre><code>## $&lt;NA&gt;
## NULL</code></pre>
</div>
<div id="tibbles-1" class="section level4" number="4.2.3.3">
<h4>
<span class="header-section-number">4.2.3.3</span> Tibbles<a class="anchor" aria-label="anchor" href="#tibbles-1"><i class="fas fa-link"></i></a>
</h4>
<p>Tibbles lassen sich sowohl wie ein Vektor als auch wie eine Liste indizieren.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">studentis</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 2 √ó 1
##   name 
##   &lt;chr&gt;
## 1 Anna 
## 2 Berta</code></pre>
<p>Die Indizierung eines Tibbles mit der einfachen Eckklammer liefert einen Tibble zur√ºck.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">studentis</span><span class="op">[</span><span class="st">"name"</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 2 √ó 1
##   name 
##   &lt;chr&gt;
## 1 Anna 
## 2 Berta</code></pre>
<p>Mit doppelter Eckklammer bekommt man,
analog zur Liste,
einen Vektor zur√ºck:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">studentis</span><span class="op">[[</span><span class="st">"name"</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Anna"  "Berta"</code></pre>
<p>Beim Dollar-Operator kommt auch eine Liste zur√ºck:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">studentis</span><span class="op">$</span><span class="va">name</span></code></pre></div>
<pre><code>## [1] "Anna"  "Berta"</code></pre>
</div>
</div>
<div id="weiterf√ºhrende-hinweise" class="section level3" number="4.2.4">
<h3>
<span class="header-section-number">4.2.4</span> Weiterf√ºhrende Hinweise<a class="anchor" aria-label="anchor" href="#weiterf%C3%BChrende-hinweise"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<a href="https://jennybc.github.io/purrr-tutorial/bk00_vectors-and-lists.html">Tutorial</a> zum Themen Indizieren von Listen von Jenny BC.</li>
</ul>
</div>
<div id="indizieren-mit-dem-tidyverse" class="section level3" number="4.2.5">
<h3>
<span class="header-section-number">4.2.5</span> Indizieren mit dem Tidyverse<a class="anchor" aria-label="anchor" href="#indizieren-mit-dem-tidyverse"><i class="fas fa-link"></i></a>
</h3>
<p>Nat√ºrlich kann man auch die Tidyverse-Verben zum Indizieren verwenden.
Das bietet sich an, wenn zwei Bedingungen erf√ºllt sind:</p>
<ol style="list-style-type: decimal">
<li>Wenn man einen Tibble als Input und als Output hat</li>
<li>Wenn man nicht programmieren m√∂chte</li>
</ol>
</div>
</div>
<div id="datens√§tze-von-lang-nach-breit-umformatieren" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Datens√§tze von lang nach breit umformatieren<a class="anchor" aria-label="anchor" href="#datens%C3%A4tze-von-lang-nach-breit-umformatieren"><i class="fas fa-link"></i></a>
</h2>
<p>Manchmal findet man Datens√§tze im sog. <em>langen</em> Format vor,
manchmal im <em>breiten</em>.</p>
<p>In der Regel m√ºssen die Daten ‚Äútidy‚Äù sein,
was meist dem langen Format entspricht, vgl. Abb. <a href="r-zweiter-blick.html#fig:langbreit">4.4</a> aus <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:langbreit"></span>
<img src="img/gather_spread.png" alt="Von lang nach breit und zur√ºck" width="70%"><p class="caption">
Figure 4.4: Von lang nach breit und zur√ºck
</p>
</div>
<p>In einer neueren Version des Tidyverse werden diese beiden Befehle umbenannt bzw. erweitert:</p>
<ul>
<li>
<code><a href="https://tidyr.tidyverse.org/reference/gather.html">gather()</a></code> -&gt; <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>
</li>
<li>
<code><a href="https://tidyr.tidyverse.org/reference/spread.html">spread()</a></code> -&gt; <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code>
</li>
</ul>
<p>Weitere Informationen findet sich in <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span>, in <a href="https://r4ds.had.co.nz/tidy-data.html?q=pivot_#pivoting">diesem Abschnitt, 12.3</a>.</p>
</div>
<div id="funktionen" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> Funktionen<a class="anchor" aria-label="anchor" href="#funktionen"><i class="fas fa-link"></i></a>
</h2>
<p>Eine Funktion kann man sich als analog zu einer Variable vorstellen.
Es ist ein Objekt, das nicht Daten, sondern Syntax beinhaltet,
vgl. Abb. <a href="r-zweiter-blick.html#fig:funs">4.5</a> aus <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:funs"></span>
<img src="img/Funs_def.png" alt="Sinnbild einer Funktion" width="70%"><p class="caption">
Figure 4.5: Sinnbild einer Funktion
</p>
</div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mittelwert</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  
  <span class="va">summe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="va">mw</span> <span class="op">&lt;-</span> <span class="va">summe</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">mw</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mittelwert</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Weitere Informationen finden sich in <a href="https://r4ds.had.co.nz/functions.html">Kapitel 19</a> in <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span>. Alternativ findet sich ein Abschnitt dazu (28.1) in <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
</div>
<div id="wiederholungen-programmieren" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> Wiederholungen programmieren<a class="anchor" aria-label="anchor" href="#wiederholungen-programmieren"><i class="fas fa-link"></i></a>
</h2>
<p>H√§ufig m√∂chte man eine Operation mehrfach ausf√ºhren.
Ein Beispiel w√§re die Anzahl der fehlenden Werte pro Spalte auslesen.
Nat√ºrlich kann man die Abfrage einfach h√§ufig tippen, nervt aber irgendwann.
Daher braucht‚Äôs Strukturen, die <em>Wiederholungen</em> beschreiben.</p>
<p>Daf√ºr gibt es verschiedene Ans√§tze.</p>
<div id="across" class="section level3" number="4.5.1">
<h3>
<span class="header-section-number">4.5.1</span> <code>across()</code><a class="anchor" aria-label="anchor" href="#across"><i class="fas fa-link"></i></a>
</h3>
<p>Handelt es sich um Spalten von Tibbles, dann bietet sich die Funktion <code>across(.col, .fns)</code> an.
<code>across</code> wendet eine oder mehrere Funktionen (mit <code>.fns</code> bezeichnet) auf die Spalten <code>.col</code> an.</p>
<p>Das erkl√§rt sich am besten mit einem Beispiel:</p>
<p>Nat√ºrlich h√§tte man in diesem Fall auch anders vorgehen k√∂nnen:</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>,
                   .fns <span class="op">=</span> <span class="va">mean</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##        mpg    cyl     disp       hp     drat      wt     qsec     vs      am
## 1 20.09062 6.1875 230.7219 146.6875 3.596563 3.21725 17.84875 0.4375 0.40625
##     gear   carb
## 1 3.6875 2.8125</code></pre>
<p>M√∂chte man der Funktion <code>.fns</code> Parameter √ºbergeben, so nutzt man diese Syntax (‚ÄúPurrr-Lambda‚Äù):</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>,
                   .fns <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##        mpg    cyl     disp       hp     drat      wt     qsec     vs      am
## 1 20.09062 6.1875 230.7219 146.6875 3.596563 3.21725 17.84875 0.4375 0.40625
##     gear   carb
## 1 3.6875 2.8125</code></pre>
<p><a href="https://www.rebeccabarter.com/blog/2020-07-09-across/">Hier</a> findet sich ein guter √úberblick zu <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>.</p>
</div>
<div id="map" class="section level3" number="4.5.2">
<h3>
<span class="header-section-number">4.5.2</span> <code>map()</code><a class="anchor" aria-label="anchor" href="#map"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://purrr.tidyverse.org/reference/map.html">map()</a></code> ist eine Funktion aus dem R-Paket <code>purrr</code> und Teil des Tidyverse.</p>
<p><code>map(x, f)</code> wenden die Funktion <code>f</code> auf jedes Element von <code>x</code> an.
Ist <code>x</code> ein Tibble, so wird <code>f</code> demnach auf jede Spalte von <code>x</code> angewendet (‚Äúzugeordnet‚Äù, daher <code>map</code>), vgl. Abb. <a href="r-zweiter-blick.html#fig:map1">4.6</a> aus <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:map1"></span>
<img src="img/wdh.png" alt="Sinnbild f√ºr map" width="70%"><p class="caption">
Figure 4.6: Sinnbild f√ºr map
</p>
</div>
<p>Hier ein Beispiel-Code:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>

<span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mean</span><span class="op">)</span></code></pre></div>
<pre><code>## $mpg
## [1] 20.09062
## 
## $cyl
## [1] 6.1875
## 
## $disp
## [1] 230.7219
## 
## $hp
## [1] 146.6875
## 
## $drat
## [1] 3.596563
## 
## $wt
## [1] 3.21725
## 
## $qsec
## [1] 17.84875
## 
## $vs
## [1] 0.4375
## 
## $am
## [1] 0.40625
## 
## $gear
## [1] 3.6875
## 
## $carb
## [1] 2.8125</code></pre>
<p>M√∂chte man der gemappten Funktion Parameter √ºbergeben,
nutzt man wieder die ‚ÄúKringel-Schreibweise‚Äù:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## $mpg
## [1] 20.09062
## 
## $cyl
## [1] 6.1875
## 
## $disp
## [1] 230.7219
## 
## $hp
## [1] 146.6875
## 
## $drat
## [1] 3.596563
## 
## $wt
## [1] 3.21725
## 
## $qsec
## [1] 17.84875
## 
## $vs
## [1] 0.4375
## 
## $am
## [1] 0.40625
## 
## $gear
## [1] 3.6875
## 
## $carb
## [1] 2.8125</code></pre>
</div>
<div id="weiterf√ºhrende-hinweise-1" class="section level3" number="4.5.3">
<h3>
<span class="header-section-number">4.5.3</span> Weiterf√ºhrende Hinweise<a class="anchor" aria-label="anchor" href="#weiterf%C3%BChrende-hinweise-1"><i class="fas fa-link"></i></a>
</h3>
<p>Weiteres zu <code><a href="https://purrr.tidyverse.org/reference/map.html">map()</a></code> findet sich z.B. in <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span>, <a href="https://r4ds.had.co.nz/iteration.html#the-map-functions">Kapitel 21.5</a> oder in <span class="citation">Sauer (<a href="references.html#ref-modar" role="doc-biblioref">2019</a>)</span>, Kap. 28.2.</p>
<p><a href="https://jennybc.github.io/purrr-tutorial/ls01_map-name-position-shortcuts.html">Tutorial</a> zu <code><a href="https://purrr.tidyverse.org/reference/map.html">map()</a></code> von Jenny BC.</p>
</div>
</div>
<div id="listenspalten" class="section level2" number="4.6">
<h2>
<span class="header-section-number">4.6</span> Listenspalten<a class="anchor" aria-label="anchor" href="#listenspalten"><i class="fas fa-link"></i></a>
</h2>
<div id="wozu-listenspalten" class="section level3" number="4.6.1">
<h3>
<span class="header-section-number">4.6.1</span> Wozu Listenspalten?<a class="anchor" aria-label="anchor" href="#wozu-listenspalten"><i class="fas fa-link"></i></a>
</h3>
<p>Listenspalten sind immer dann sinnvoll,
wenn eine einfache Tabelle nicht komplex genug f√ºr unsere Daten ist.</p>
<p>Zwei F√§lle stechen dabei ins Auge:</p>
<ol style="list-style-type: decimal">
<li>Unsere Datenstruktur ist nicht rechteckig</li>
<li>In einer Zelle der Tabelle soll mehr als ein einzelner Wert stehen: vielleicht ein Vektor, eine Liste oder eine Tabelle</li>
</ol>
<p>Der erstere Fall (nicht reckeckig) lie√üe sich noch einfach l√∂sen,
in dem man mit <code>NA</code> auff√ºllt.</p>
<p>Der zweite Fall verlangt schlichtweg nach komplexeren Datenstrukturen.</p>
<p><a href="https://r4ds.had.co.nz/many-models.html?q=list#creating-list-columns">Kap. 25.3</a> aus <span class="citation">Wickham and Grolemund (<a href="references.html#ref-r4ds" role="doc-biblioref">2016</a>)</span> bietet einen guten Einstieg in das Konzept von Listenspalten (list-columns) in R.</p>
</div>
<div id="beispiele-f√ºr-listenspalten" class="section level3" number="4.6.2">
<h3>
<span class="header-section-number">4.6.2</span> Beispiele f√ºr Listenspalten<a class="anchor" aria-label="anchor" href="#beispiele-f%C3%BCr-listenspalten"><i class="fas fa-link"></i></a>
</h3>
<div id="tidymodel" class="section level4" number="4.6.2.1">
<h4>
<span class="header-section-number">4.6.2.1</span> tidymodel<a class="anchor" aria-label="anchor" href="#tidymodel"><i class="fas fa-link"></i></a>
</h4>
<p>Wenn wir mit <code>tidymodels</code> arbeiten,
werden wir mit Listenspalten zu tun haben.
Daher ist es praktisch, sich schon mal damit zu besch√§ftigen.</p>
<p>Hier ein Beispiel f√ºr eine <span class="math inline">\(v=3\)</span>-fache Kreuzvalidierung:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="va">mtcars_cv</span> <span class="op">&lt;-</span>
  <span class="fu">vfold_cv</span><span class="op">(</span><span class="va">mtcars</span>, v <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="va">mtcars_cv</span></code></pre></div>
<pre><code>## #  3-fold cross-validation 
## # A tibble: 3 √ó 2
##   splits          id   
##   &lt;list&gt;          &lt;chr&gt;
## 1 &lt;split [21/11]&gt; Fold1
## 2 &lt;split [21/11]&gt; Fold2
## 3 &lt;split [22/10]&gt; Fold3</code></pre>
<p>Betrachten wir das Objekt <code>mtcars_cv</code> n√§her.
Die Musik spielt in der 1. Spalte.</p>
<p>Lesen wir den Inhalt der 1. Spalte, 1 Zeile aus (nennen wir das mal ‚ÄúPosition 1,1‚Äù):</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pos11</span> <span class="op">&lt;-</span> <span class="va">mtcars_cv</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="va">pos11</span></code></pre></div>
<pre><code>## &lt;Analysis/Assess/Total&gt;
## &lt;21/11/32&gt;</code></pre>
<p>In dieser Zelle findet sich eine Aufteilung des Komplettdatensatzes in den Analyseteil (Analysis sample) und den Assessmentteil (Assessment Sample).</p>
<p>Schauen wir jetzt in dieses Objekt n√§her an.
Das k√∂nnen wir mit <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> tun.
<code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> zeigt uns die Strktur eines Objekts.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">pos11</span><span class="op">)</span></code></pre></div>
<pre><code>## List of 4
##  $ data  :'data.frame':  32 obs. of  11 variables:
##   ..$ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##   ..$ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
##   ..$ disp: num [1:32] 160 160 108 258 360 ...
##   ..$ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
##   ..$ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##   ..$ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
##   ..$ qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
##   ..$ vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
##   ..$ am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
##   ..$ gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
##   ..$ carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...
##  $ in_id : int [1:21] 1 3 4 5 8 9 10 12 15 16 ...
##  $ out_id: logi NA
##  $ id    : tibble [1 √ó 1] (S3: tbl_df/tbl/data.frame)
##   ..$ id: chr "Fold1"
##  - attr(*, "class")= chr [1:2] "vfold_split" "rsplit"</code></pre>
<p>Oh! <code>pos11</code> ist eine Liste, und zwar eine durchaus komplexe.
Wir m√ºssen erkennen,
dass in einer einzelnen Zelle dieses Dataframes viel mehr steht,
als ein Skalar bzw. ein einzelnes, atomares Element.</p>
<p>Damit handelt es sich bei Spalte 1 dieses Dataframes (<code>mtcars_cv</code>) also um eine Listenspalte.</p>
<p>√úben wir uns noch etwas im Indizieren.</p>
<p>Sprechen wir in <code>pos11</code> das erste Element an (<code>data</code>) und davon das erste Element:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pos11</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
## [31] 15.0 21.4</code></pre>
<p>Wir haben hier die doppelten Eckklammern benutzt,
um den ‚Äúeigentlichen‚Äù oder ‚Äúinneren‚Äù Vektor zu bekommen,
nicht die ‚Äúau√üen‚Äù herumgewickelte Liste.
Zur Erinnerung:
Ein Dataframe ist ein Spezialfall einer Liste,
also auch eine Liste, nur eine mit bestimmten Eigenschaften.</p>
<p>Zum Vergleich indizieren wir mal mit einer einfachen Eckklammer:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pos11</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##                    mpg
## Mazda RX4         21.0
## Mazda RX4 Wag     21.0
## Datsun 710        22.8
## Hornet 4 Drive    21.4
## Hornet Sportabout 18.7
## Valiant           18.1</code></pre>
<p>Mit <code><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck()</a></code> bekommen wir das gleiche Ergebnis,
nur etwas komfortabler,
da wir keine Eckklammern tippen m√ºssen:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="va">pos11</span>, <span class="st">"data"</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<p>Wie man sieht, k√∂nnen wir beliebig tief in das Objekt hineinindizieren.</p>
</div>
<div id="kurs-datascience1" class="section level4" number="4.6.2.2">
<h4>
<span class="header-section-number">4.6.2.2</span> Kurs DataScience1<a class="anchor" aria-label="anchor" href="#kurs-datascience1"><i class="fas fa-link"></i></a>
</h4>
<p>Ein Kurs, wie dieser, kann anhand einer ‚ÄúDeskriptoren‚Äù wie Titel der Inhalte, Lernziele, Literatur und so weiter zusammmengefasst werden.
Diese Deskriptoren kann man wiederum jeder Kurswoche oder jedem Kursabschnitt zuordnen,
so dass eine zweidimensionale Struktur resultiert.
Eine Tabelle, einfach gesagt, etwa so:</p>
<div id="ffomdulass" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ffomdulass .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ffomdulass .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ffomdulass .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ffomdulass .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ffomdulass .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ffomdulass .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ffomdulass .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ffomdulass .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ffomdulass .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ffomdulass .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ffomdulass .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ffomdulass .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ffomdulass .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ffomdulass .gt_from_md > :first-child {
  margin-top: 0;
}

#ffomdulass .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ffomdulass .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ffomdulass .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ffomdulass .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ffomdulass .gt_row_group_first td {
  border-top-width: 2px;
}

#ffomdulass .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ffomdulass .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ffomdulass .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ffomdulass .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ffomdulass .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ffomdulass .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ffomdulass .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ffomdulass .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ffomdulass .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ffomdulass .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ffomdulass .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ffomdulass .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ffomdulass .gt_left {
  text-align: left;
}

#ffomdulass .gt_center {
  text-align: center;
}

#ffomdulass .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ffomdulass .gt_font_normal {
  font-weight: normal;
}

#ffomdulass .gt_font_bold {
  font-weight: bold;
}

#ffomdulass .gt_font_italic {
  font-style: italic;
}

#ffomdulass .gt_super {
  font-size: 65%;
}

#ffomdulass .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#ffomdulass .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#ffomdulass .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ffomdulass .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#ffomdulass .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#ffomdulass .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<div class="inline-table"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Nr</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Titel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Literatur</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Aufgaben</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">Titel1</td>
<td class="gt_row gt_left">Literatur1</td>
<td class="gt_row gt_left">Aufgaben1</td>
</tr>
<tr>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">Titel2</td>
<td class="gt_row gt_left">Literatur2</td>
<td class="gt_row gt_left">Aufgaben2</td>
</tr>
<tr>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_left">Titel3</td>
<td class="gt_row gt_left">Literatur3</td>
<td class="gt_row gt_left">Aufgaben3</td>
</tr>
</tbody>
</table></div>
</div>
<p>Wie man sieht, entspricht jede Spalte einem Deskriptor des Kurses,
und jede Zeile entspricht einem Thema (oder Woche oder Abschnitt) des Kurses.</p>
<p>Jetzt ist es nur so,
dass einzelne Zellen dieser Tabelle nicht aus nur einem Element bestehen.
So k√∂nnte etwa ‚ÄúAufgaben1‚Äù aus mehreren Aufgaben bestehen,
die jeweils wiederum aus mehreren (Text-)Elementen bestehen.
Oder ‚ÄúLiteratur2‚Äù besteht vielleicht aus zwei Literaturquellen.</p>
<p>Kurz gesagt, wir brauchen eine Tabelle,
die erlaubt, in einer Zelle mehr als ein einzelnes Element zu packen.
Listenspalten erlauben das.</p>
<p>Schauen wir uns die ‚ÄúMastertabelle‚Äù dieses Kurses an zur Illustration.</p>
<p>Zun√§chst <code>source</code>n wir die n√∂tigen Funktionen.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/sebastiansauer/Lehre/main/R-Code/render-course-sections.R"</span><span class="op">)</span></code></pre></div>
<p>In Ihrem <code>Environment</code> sollten Sie jetzt die gesourcten Funktionen sehen.
Mit Klick auf den Funktionsnamen k√∂nnen Sie diese Funktionen auch betrachten.</p>
<p>Die Deskriptoren des Kurses speisen sich aus zwei Textdateien, gespeichert im sog. YAML-Format, ein einfaches Textformat, und hier nicht weiter von Belang.</p>
<p>Zum einen eine Datei mit den Datumsangaben:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">course_dates_file</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/sebastiansauer/datascience1/main/course-dates.yaml"</span></code></pre></div>
<p>Zum anderen eine Datei mit den Deskriptoren,
die unabh√§ngig vom Datum sind:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">content_file</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/sebastiansauer/datascience1/main/_modul-ueberblick.yaml"</span></code></pre></div>
<p>Im <a href="https://github.com/sebastiansauer/datascience1">Githup-Repo</a>
dieses Kurses k√∂nnen Sie die Dateien komfortabel betrachten.</p>
<p>Die ‚ÄúMastertabelle‚Äù kann man mit folgender Funktion erstellen:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span> <span class="op">&lt;-</span> <span class="fu">build_master_course_table</span><span class="op">(</span>
  course_dates_file <span class="op">=</span>  <span class="va">course_dates_file</span>,
  content_file <span class="op">=</span> <span class="va">content_file</span><span class="op">)</span></code></pre></div>
<p>Betrachten Sie die Tabelle in Ruhe!
Sie werden sehen, dass einige Spalten komplex sind,
also mehr als nur einen einzelnen Wert enthalten:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Lesen Sie die Hinweise zum Modul."                                       
## [2] "Installieren (oder Updaten) Sie die f√ºr dieses Modul angegeben Software."
## [3] "Lesen Sie die Literatur."</code></pre>
<p>Gerade haben wir aus dem Objekt <code>mastertable</code>, ein Dataframe,
die Spalte mit dem Namen <em>Vorbereitung</em> ausgelesen und aus dieser Spalte das erste erste Element.
Dieses erste Element ist ein Textvektor der L√§nge 3.</p>
<p>Daraus k√∂nnten wir z.B. das zweite Element auslesen:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Installieren (oder Updaten) Sie die f√ºr dieses Modul angegeben Software."</code></pre>
<p>Was w√ºrde passieren, wenn wir anstelle der doppelten Eckklammer einfache Eckklammern verwenden w√ºrden?</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[</span><span class="st">"Vorbereitung"</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "list"</code></pre>
<p>Das macht noch keinen gro√üen Unterschied,
aber schauen wir mal weiter.</p>
<p>Wenn wir das erste Element der Spalte ‚ÄúVorbereitung‚Äù mit <em>doppelter</em> Eckklammer ansprechen,
bekommen wir einen Text-Vektor (der L√§nge drei) zur√ºck.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Lesen Sie die Hinweise zum Modul."                                       
## [2] "Installieren (oder Updaten) Sie die f√ºr dieses Modul angegeben Software."
## [3] "Lesen Sie die Literatur."</code></pre>
<p>Jetzt k√∂nnen wir, wie oben getan,
diese einzelnen Elemente ansprechen.</p>
<p>Aber: Wenn wir das erste Element der Spalte ‚ÄúVorbereitung‚Äù mit einfacher Eckklammer ansprechen, bekommen wir eine Liste <em>mit einem Element</em> zur√ºck.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## [[1]]
## [1] "Lesen Sie die Hinweise zum Modul."                                       
## [2] "Installieren (oder Updaten) Sie die f√ºr dieses Modul angegeben Software."
## [3] "Lesen Sie die Literatur."</code></pre>
<p>Wir k√∂nnen also nicht (ohne weiteres ‚ÄúAbsch√§len‚Äù)
z.B. das zweite Element des Text-Vektors (‚ÄúInstallieren Sie‚Ä¶‚Äù) auslesen:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Wenn Sie sich √ºber <code><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck()</a></code> wundern,
Sie h√§tten synonym auch schreiben k√∂nnen:</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## [[1]]
## NULL</code></pre>
<p>Da die Liste nur aus einem Element besteht,
k√∂nnten wir z.B. nicht das zweite Element der Liste ansprechen:</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## Error in mastertable[["Vorbereitung"]][1][[2]]: subscript out of bounds</code></pre>
<p>Haben wir aber die doppelte Eckklammer verwendet,
so bekommen wir einen Vektor der L√§nge drei zur√ºck (vom Typ Text),
und daher k√∂nnen wir die Elemente 1 bis 3 ansprechen:</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mastertable</span><span class="op">[[</span><span class="st">"Vorbereitung"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "Installieren (oder Updaten) Sie die f√ºr dieses Modul angegeben Software."</code></pre>
<p>Dabei ist es egal, ob Sie einfache oder doppelte Eckklammern benutzen,
da Listen auch Vektoren sind.</p>
</div>
</div>
<div id="programmieren-mit-dem-tidyverse" class="section level3" number="4.6.3">
<h3>
<span class="header-section-number">4.6.3</span> Programmieren mit dem Tidyverse<a class="anchor" aria-label="anchor" href="#programmieren-mit-dem-tidyverse"><i class="fas fa-link"></i></a>
</h3>
<p>Das Programmieren mit dem Tidyvers ist nicht ganz einfach und hier nicht n√§her ausgef√ºhrt.
Eine Einf√ºhrung findet sich z.B.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=nERXS3ssntw">Tidyeval in f√ºnf Minuten (Video)</a></li>
<li>In <a href="https://adv-r.hadley.nz/">Kapiteln 17-21 in Advanced R, 2nd Ed</a>
</li>
<li>Ein √úberblicksdiagramm findet sich <a href="https://twitter.com/lapply/status/1493908215796535296/photo/1">hier</a> <a href="https://twitter.com/lapply/status/1493908215796535296?t=P0SbLJAd0Yd97hYPzNMxMg&amp;s=09">Quelle</a>.</li>
</ul>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="statistisches-lernen.html"><span class="header-section-number">3</span> Statistisches Lernen</a></div>
<div class="next"><a href="tidymodels.html"><span class="header-section-number">5</span> tidymodels</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-zweiter-blick"><span class="header-section-number">4</span> R, zweiter Blick</a></li>
<li>
<a class="nav-link" href="#lernsteuerung-1"><span class="header-section-number">4.1</span> Lernsteuerung</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#vorbereitung-2"><span class="header-section-number">4.1.1</span> Vorbereitung</a></li>
<li><a class="nav-link" href="#lernziele-2"><span class="header-section-number">4.1.2</span> Lernziele</a></li>
<li><a class="nav-link" href="#literatur-2"><span class="header-section-number">4.1.3</span> Literatur</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#objekttypen-in-r"><span class="header-section-number">4.2</span> Objekttypen in R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%C3%BCberblick"><span class="header-section-number">4.2.1</span> √úberblick</a></li>
<li><a class="nav-link" href="#taxonomie-1"><span class="header-section-number">4.2.2</span> Taxonomie</a></li>
<li><a class="nav-link" href="#indizieren"><span class="header-section-number">4.2.3</span> Indizieren</a></li>
<li><a class="nav-link" href="#weiterf%C3%BChrende-hinweise"><span class="header-section-number">4.2.4</span> Weiterf√ºhrende Hinweise</a></li>
<li><a class="nav-link" href="#indizieren-mit-dem-tidyverse"><span class="header-section-number">4.2.5</span> Indizieren mit dem Tidyverse</a></li>
</ul>
</li>
<li><a class="nav-link" href="#datens%C3%A4tze-von-lang-nach-breit-umformatieren"><span class="header-section-number">4.3</span> Datens√§tze von lang nach breit umformatieren</a></li>
<li><a class="nav-link" href="#funktionen"><span class="header-section-number">4.4</span> Funktionen</a></li>
<li>
<a class="nav-link" href="#wiederholungen-programmieren"><span class="header-section-number">4.5</span> Wiederholungen programmieren</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#across"><span class="header-section-number">4.5.1</span> across()</a></li>
<li><a class="nav-link" href="#map"><span class="header-section-number">4.5.2</span> map()</a></li>
<li><a class="nav-link" href="#weiterf%C3%BChrende-hinweise-1"><span class="header-section-number">4.5.3</span> Weiterf√ºhrende Hinweise</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#listenspalten"><span class="header-section-number">4.6</span> Listenspalten</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#wozu-listenspalten"><span class="header-section-number">4.6.1</span> Wozu Listenspalten?</a></li>
<li><a class="nav-link" href="#beispiele-f%C3%BCr-listenspalten"><span class="header-section-number">4.6.2</span> Beispiele f√ºr Listenspalten</a></li>
<li><a class="nav-link" href="#programmieren-mit-dem-tidyverse"><span class="header-section-number">4.6.3</span> Programmieren mit dem Tidyverse</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/sebastiansauer/datascience1/blob/master/050-R-Vertiefung.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/sebastiansauer/datascience1/edit/master/050-R-Vertiefung.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DataScience1</strong>: Grundlagen der Prognosemodellierung üîÆüß∞" was written by Sebastian Sauer. It was last built on 2022-06-18 17:01:53.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
